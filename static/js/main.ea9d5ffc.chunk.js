(this["webpackJsonphangout-app"]=this["webpackJsonphangout-app"]||[]).push([[0],{425:function(e,t,a){},689:function(e,t){},746:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),o=a(19),i=a(12),s=(a(425),a(760)),u=a(32),m=a(26),d=a(9),p=a.n(d),v=a(14),E=a(28),g=a(777),f=a(759),h=a(379),b=a.n(h),y=a(775),O=a(766),j=a(155),w=a(81),x=a(767),k=a(772),S=a(403);var C=function(e){var t=e.photoURL,a=e.attendeeId;return r.a.createElement(x.a.Item,null,r.a.createElement(S.a,{as:o.b,to:"/profile/".concat(a),size:"mini",circular:!0,src:t,alt:""}))},D=a(47),F=a.n(D);var P=function(e){var t=e.event,a=e.handleDeleteEvent,n=t.title,c=t.date,l=t.description,s=t.venue,u=t.hostedBy,m=t.hostPhotoURL,d=t.attendees,p=t.cancelled,v=Object(i.useSelector)((function(e){return e.firebase.auth}));return r.a.createElement(y.a.Group,null,r.a.createElement(y.a,null,r.a.createElement(O.a.Group,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Image,{size:"tiny",circular:!0,src:m,alt:""}),r.a.createElement(O.a.Content,null,r.a.createElement(O.a.Header,null,n),r.a.createElement(O.a.Description,null,"Hosted by"," ",r.a.createElement(o.b,{to:"/profile/".concat(t.hostUid),href:"/"},u)),p&&r.a.createElement(j.a,{ribbon:"right",color:"red",style:{top:"-40px"}},"This event has been cancelled"))))),r.a.createElement(y.a,null,r.a.createElement("span",null,r.a.createElement(w.a,{name:"clock"})," ",F()(c.toDate()).format("dddd D-MM-yyyy HH:mm").toString()," |",r.a.createElement(w.a,{name:"marker"})," ",s)),r.a.createElement(y.a,{secondary:!0},r.a.createElement(x.a,{horizontal:!0},d&&Object.keys(d).map((function(e){return r.a.createElement(C,Object.assign({key:e},d[e],{attendeeId:e}))})))),r.a.createElement(y.a,{clearing:!0},r.a.createElement("span",null,l),t.hostUid===v.uid&&r.a.createElement(k.a,{color:"red",floated:"right",onClick:function(){return a(t.id)}},"Delete"),r.a.createElement(k.a,{as:o.b,to:"/events/".concat(t.id),color:"teal",floated:"right"},"View")))};var L=function(e){var t=e.events,a=e.handleDeleteEvent,n=e.getMoreEvents,c=e.loading,l=e.moreEvents;return r.a.createElement("div",null,r.a.createElement("h1",null,"Event List"),r.a.createElement("div",null,0!==t.length&&r.a.createElement(b.a,{pageStart:0,loadMore:n,hasMore:!c&&l,initialLoad:!1},t.map((function(e,t){return r.a.createElement(P,{key:e.id,event:e,handleDeleteEvent:a})})))))},R=a(16),I=a(779),A=a(20),M=a.n(A),U=a(10),N=function(e,t,a){return a.date=F()(a.date).toDate(),Object(R.a)(Object(R.a)({},a),{},{venueLatLng:{lat:a.lat,lng:a.lng},hostUid:e.uid,hostPhotoURL:t||"/re-vents/assets/user.png",hostedBy:e.displayName,created:Date.now(),attendees:Object(U.a)({},e.uid,{going:!0,joinDate:Date.now(),photoURL:t||"/re-vents/assets/user.png",displayName:e.displayName,host:!0})})},T=a(204),B=a.n(T);a(511),a(514),a(751);B.a.initializeApp({apiKey:"AIzaSyD2BbBIyWlyqYYUyQQdSQjOkgteCT1u0cY",authDomain:"re-vents-290306.firebaseapp.com",databaseURL:"https://re-vents-290306.firebaseio.com",projectId:"re-vents-290306",storageBucket:"re-vents-290306.appspot.com",messagingSenderId:"852703381616",appId:"1:852703381616:web:86b39d8917bdeb0f9c4cb5",measurementId:"G-KF294J0LC5"}),B.a.firestore();var V=B.a,z=Object(I.a)("ASYNC_ACTION_START"),H=Object(I.a)("ASYNC_ACTION_FINISH"),G=Object(I.a)("ASYNC_ACTION_ERROR"),q=Object(I.a)("RESET_EVENTS"),_=Object(I.a)("FETCH_EVENTS"),Y=function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a){var n,r,c,l,o,i,s,u,m;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Date,r=V.firestore(),c=r.collection("events"),t.prev=3,a(z()),t.t0=e,!t.t0){t.next=10;break}return t.next=9,r.collection("events").doc(e.id).get();case 9:t.t0=t.sent;case 10:return l=t.t0,o=e?c.where("date",">=",n).orderBy("date").startAfter(l).limit(2):c.where("date",">=",n).orderBy("date").limit(2),t.next=14,o.get();case 14:if(i=t.sent,s=[],0!==i.docs.length){t.next=19;break}return a(H()),t.abrupt("return");case 19:for(u=0;u<i.docs.length;++u)m=Object(R.a)(Object(R.a)({},i.docs[u].data()),{},{id:i.docs[u].id}),s.push(m);return a(_(s)),a(H()),t.abrupt("return",i);case 25:t.prev=25,t.t1=t.catch(3),console.log(t.t1),a(G());case 29:case"end":return t.stop()}}),t,null,[[3,25]])})));return function(e){return t.apply(this,arguments)}}()},Q=a(774);var W=function(){return r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(f.a,{inverted:!0,content:"Loading"}))},J=a(776);var K=function(){return r.a.createElement("div",null,r.a.createElement(J.a,{attached:"top",content:"Recent Activities"}),r.a.createElement(y.a,{attached:!0},r.a.createElement("p",null,"Recent activities")))};var Z=function(){var e=Object(n.useState)(!1),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(E.a)(l,2),s=o[0],u=o[1],d=Object(n.useState)([]),h=Object(E.a)(d,2),b=h[0],y=h[1],O=Object(n.useState)(!1),j=Object(E.a)(O,2),w=j[0],x=j[1],k=Object(i.useDispatch)(),S=Object(i.useSelector)((function(e){return e.events})),C=Object(i.useSelector)((function(e){return e.async.loading}));Object(n.useEffect)((function(){(function(){var e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Y());case 2:(t=e.sent)&&t.docs&&t.docs.length>1&&(c(!0),u(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),x(!0)}),[]),Object(n.useEffect)((function(){S&&w&&y((function(e){return[].concat(Object(m.a)(e),Object(m.a)(S))}))}),[S]);var D=function(){var e=Object(v.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S[S.length-1],e.next=3,k(Y(t));case 3:(a=e.sent)&&a.docs&&a.docs.length<=1&&c(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s?r.a.createElement(W,null):r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:10},r.a.createElement(L,{loading:C,moreEvents:a,getMoreEvents:D,events:b,handleDeleteEvent:function(e){k(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=r.getFirestore,o=l(),i=c().auth().currentUser,t.prev=3,t.next=6,o.delete("event_attendee/".concat(e,"_").concat(i.uid));case 6:return t.next=8,o.delete("events/".concat(e));case 8:A.toastr.success("Success","Event has beed deleted"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),A.toastr.error("Oops","Something went wrong");case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e))}})),r.a.createElement(g.a.Column,{width:6},r.a.createElement(K,null)),r.a.createElement(g.a.Column,{width:10},r.a.createElement(f.a,{active:C})))},X=a(773),$=Object(I.a)("OPEN_MODAL"),ee=Object(I.a)("CLOSE_MODAL"),te=Object(I.a)("REGISTER_USER_FAILED"),ae=Object(I.a)("LOG_IN_FAILED"),ne=Object(I.a)("RESET_AUTH_STATE"),re=function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=c(),t.prev=2,a(ee()),t.next=6,l.login({type:"popup",provider:e});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()};var ce=function(){var e=Object(i.useDispatch)();return r.a.createElement(X.a.Item,{position:"right"},r.a.createElement(k.a,{basic:!0,inverted:!0,content:"Login",onClick:function(){e(ne()),e($({modalType:"LogInModal"}))}}),r.a.createElement(k.a,{basic:!0,inverted:!0,content:"Register",style:{marginLeft:"1rem"},onClick:function(){e($({modalType:"RegisterModal"}))}}))},le=a(23),oe=a(765);var ie=function(){var e=Object(i.useSelector)((function(e){return e.firebase})),t=e.profile,a=e.auth,n=Object(i.useDispatch)(),c=Object(le.useFirebase)(),l=Object(u.g)();return r.a.createElement(X.a.Item,{position:"right"},r.a.createElement(S.a,{avatar:!0,spaced:"right",src:t.photoURL||"/re-vents/assets/user.png",alt:""}),r.a.createElement(oe.a,{pointing:"top left",text:t.displayName},r.a.createElement(oe.a.Menu,null,r.a.createElement(oe.a.Item,{as:o.b,to:"/create-event",text:"Create Event",icon:"plus"}),r.a.createElement(oe.a.Item,{text:"My Events",icon:"calendar"}),r.a.createElement(oe.a.Item,{text:"My Network",icon:"users"}),r.a.createElement(oe.a.Item,{as:o.b,to:"/profile/".concat(a.uid),text:"My Profile",icon:"user"}),r.a.createElement(oe.a.Item,{as:o.b,to:"/settings",text:"Settings",icon:"settings"}),r.a.createElement(oe.a.Item,{text:"Sign Out",icon:"power",onClick:function(){c.auth().signOut(),l.push("/"),n(ne())}}))))};var se=function(){var e=Object(i.useSelector)((function(e){return e.firebase})).auth;return r.a.createElement(X.a,{inverted:!0,fixed:"top"},r.a.createElement(s.a,null,r.a.createElement(X.a.Item,{header:!0,as:o.b,to:"/"},r.a.createElement("img",{src:"/re-vents/assets/logo.png",alt:"Logo",style:{marginRight:"0.5rem"}}),"Re-vents"),r.a.createElement(X.a.Item,{as:o.c,to:"/events",name:"Events"}),r.a.createElement(X.a.Item,{as:o.c,to:"/people",name:"People"}),r.a.createElement(X.a.Item,null,r.a.createElement(k.a,{floated:"right",as:o.b,to:"/create-event",positive:!0,inverted:!0,content:"Create Event"})),e.isLoaded&&!e.isEmpty?r.a.createElement(ie,null):r.a.createElement(ce,null)))};var ue=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"event chat"))},me={position:"absolute",bottom:"5%",left:"5%",width:"100%",color:"white"};var de=function(e){var t=e.event,a=e.isHost,n=e.isGoing,c=Object(i.useDispatch)();return r.a.createElement(y.a.Group,null,r.a.createElement(y.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(S.a,{src:"/re-vents/assets/pho.jpg",fluid:!0,alt:""}),r.a.createElement(y.a,{basic:!0,style:me},r.a.createElement(O.a.Group,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Content,null,r.a.createElement(J.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,F()(t.date.toDate()).format("DD/MM/yyyy HH:mm")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement(o.b,{to:"/profile/".concat(t.hostUid),style:{color:"white",fontWeight:"bold"}},t.hostedBy))))))),r.a.createElement(y.a,{attached:"bottom"},!a&&r.a.createElement(r.a.Fragment,null,n?r.a.createElement(k.a,{onClick:function(){c(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=r.getFirestore,o=l(),i=c().auth().currentUser,t.prev=3,t.next=6,o.update("events/".concat(e.id),Object(U.a)({},"attendees.".concat(i.uid),o.FieldValue.delete()));case 6:return t.next=8,o.delete("event_attendee/".concat(e.id,"_").concat(i.uid));case 8:A.toastr.success("Success","Cancel event successfully"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),A.toastr.error("Oops","Going to event failed"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}},"Cancel My Place"):r.a.createElement(k.a,{color:"teal",onClick:function(){c(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l,o,i,s,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=r.getFirestore,o=l(),i=c().auth().currentUser,s=n().firebase.profile.photoURL||"/re-vents/assets/user.png",u={going:!0,joinDate:Date.now(),photoURL:s,displayName:i.displayName,host:!1},t.prev=5,t.next=8,o.update("events/".concat(e.id),Object(U.a)({},"attendees.".concat(i.uid),u));case 8:return t.next=10,o.set("event_attendee/".concat(e.id,"_").concat(i.uid),{eventId:e.id,userUid:i.uid,eventDate:e.date,host:!1});case 10:A.toastr.success("Success","Join event successfully"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),A.toastr.error("Oops","Going to event failed"),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}},"JOIN THIS EVENT")),a&&r.a.createElement(k.a,{color:"orange",as:o.b,to:"/manage/".concat(t.id)},"Manage Event")))},pe=a(404),ve=function(e){e.text;return r.a.createElement(w.a,{color:"red",name:"marker",size:"large"})},Ee=function(e){return r.a.createElement(y.a,{attached:"bottom"},r.a.createElement("div",{style:{height:"300px",width:"100%"}},r.a.createElement(pe.a,{bootstrapURLKeys:{key:"AIzaSyD2BbBIyWlyqYYUyQQdSQjOkgteCT1u0cY"},defaultCenter:e.center,defaultZoom:e.zoom},r.a.createElement(ve,{lat:e.center.lat,lng:e.center.lng,text:"My Marker"}))))};var ge=function(e){var t=e.event,a=Object(n.useState)(!1),c=Object(E.a)(a,2),l=c[0],o=c[1];return r.a.createElement(y.a.Group,null,r.a.createElement(y.a,{attached:"top"},r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:1},r.a.createElement(w.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(g.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(y.a,{attached:!0},r.a.createElement(g.a,{verticalAlign:"middle"},r.a.createElement(g.a.Column,{width:1},r.a.createElement(w.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(g.a.Column,{width:15},r.a.createElement("span",null,F()(t.date.toDate()).format("DD/MM/yyyy HH:mm"))))),r.a.createElement(y.a,{attached:!0},r.a.createElement(g.a,{verticalAlign:"middle"},r.a.createElement(g.a.Column,{width:1},r.a.createElement(w.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(g.a.Column,{width:11},r.a.createElement("span",null,t.venue)),r.a.createElement(g.a.Column,{width:4},r.a.createElement(k.a,{color:"teal",size:"tiny",content:l?"Hide Map":"Show Map",onClick:function(){o(!l)}})),l&&r.a.createElement(Ee,{zoom:8,center:{lat:t.venueLatLng.lat||59.95,lng:t.venueLatLng.lng||30.33}}))))};var fe=function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t&&Object.keys(t).length," ",t&&1===Object.keys(t).length?"Person":"People"," ","going"),r.a.createElement(y.a,{attached:!0},r.a.createElement(O.a.Group,{divided:!0},t&&Object.keys(t).map((function(e){return r.a.createElement(O.a,{as:o.b,to:"/profile/".concat(e),key:e,style:{position:"relative"}},t[e].host&&r.a.createElement(j.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(O.a.Image,{size:"tiny",src:t[e].photoURL,alt:""}),r.a.createElement(O.a.Content,{verticalAlign:"middle"},r.a.createElement(O.a.Header,{as:"h3"},t[e].displayName)))})))))};var he=function(e){var t=e.match,a=e.history,c=t.params.id;Object(le.useFirestoreConnect)([{collection:"events",doc:c,storeAs:"eventDetail"}]);var l=Object(i.useSelector)((function(e){return e.firestore.data.eventDetail})),o=Object(i.useSelector)((function(e){return e.firebase.auth})),s=Object(le.useFirestore)();Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("events/".concat(c));case 2:e.sent.exists||(a.push("/events"),A.toastr.error("Error","Event not found"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var u=(null===l||void 0===l?void 0:l.attendees)||[],m=(null===l||void 0===l?void 0:l.hostUid)===o.uid,d=Object.keys(u).some((function(e){return e===o.uid}));return l?r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:10},r.a.createElement(de,{event:Object(R.a)(Object(R.a)({},l),{},{id:c}),isHost:m,isGoing:d}),r.a.createElement(ge,{event:Object(R.a)(Object(R.a)({},l),{},{id:c})}),r.a.createElement(ue,null)),r.a.createElement(g.a.Column,{width:6},r.a.createElement(fe,{attendees:l.attendees}))):r.a.createElement(W,null)};var be=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"people dashboard"))},ye=a(770),Oe=a(387),je=a.n(Oe);var we=function(e){var t=e.match.params.id,a=Object(i.useSelector)((function(e){return e.firebase})).auth;Object(le.useFirestoreConnect)((function(){return t&&t!==a.uid?[{collection:"users",doc:t,storeAs:"profiles"},{collection:"users",doc:t,subcollections:[{collection:"photos"}],storeAs:"photos"}]:[{collection:"users",doc:a.uid,storeAs:"profiles"},{collection:"users",doc:a.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]}));var n=Object(i.useSelector)((function(e){return e.firestore.ordered.photos})),c=Object(i.useSelector)((function(e){return e.firestore.ordered.profiles&&e.firestore.ordered.profiles[0]}));return c?r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:16},r.a.createElement(y.a,null,r.a.createElement(O.a.Group,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Image,{avatar:!0,size:"small",src:c.photoURL||"/re-vents/assets/user.png"}),r.a.createElement(O.a.Content,{verticalAlign:"bottom"},r.a.createElement(J.a,{as:"h1"},c.displayName),r.a.createElement("br",null),r.a.createElement(J.a,{as:"h3"},c.occupation),r.a.createElement("br",null),r.a.createElement(J.a,{as:"h3"},c.dateOfBirth?F()().diff(F()(c.dateOfBirth.toDate()),"years"):"Unknown age"," ","year old , Lives in ",c.origin)))))),r.a.createElement(g.a.Column,{width:t===a.uid?12:16},r.a.createElement(y.a,null,r.a.createElement(g.a,{columns:2},r.a.createElement(g.a.Column,{width:10},r.a.createElement(J.a,{icon:"smile",content:"About Display Name"}),r.a.createElement("p",null,"I am a: ",r.a.createElement("strong",null,c.occupation||"Unknown")),r.a.createElement("p",null,"Originally from ",r.a.createElement("strong",null,c.origin||"Unknown")),r.a.createElement("p",null,"Member Since:"," ",r.a.createElement("strong",null,new Date(c.createdAt.toDate()).toDateString())),r.a.createElement("p",null,c.description)),r.a.createElement(g.a.Column,{width:6},r.a.createElement(J.a,{icon:"heart outline",content:"Interests"}),c.interest?r.a.createElement(x.a,null,c.interests&&c.interests.map((function(e,t){return r.a.createElement(O.a,{key:e+t},r.a.createElement(w.a,{name:"heart"}),r.a.createElement(O.a.Content,null,e))}))):r.a.createElement("p",null,"No interests"))))),t===a.uid&&r.a.createElement(g.a.Column,{width:4},r.a.createElement(y.a,null,r.a.createElement(k.a,{as:o.b,to:"/settings",color:"teal",fluid:!0,basic:!0,content:"Edit Profile"}))),n&&n.length&&r.a.createElement(g.a.Column,{width:t===a.uid?12:16},r.a.createElement(y.a,{attached:!0},r.a.createElement(J.a,{icon:"image",content:"Photos"}),r.a.createElement(S.a.Group,{size:"small"},n.map((function(e){return r.a.createElement(je.a,{style:{width:"auto"},key:e.id,height:400,placeholder:r.a.createElement(S.a,{rounded:!0,src:"/re-vents/assets/user.png",alt:""})},r.a.createElement(S.a,{src:e.url,alt:""}))}))))),r.a.createElement(g.a.Column,{width:t===a.uid?12:16},r.a.createElement(y.a,{attached:!0},r.a.createElement(J.a,{icon:"calendar",content:"Events"}),r.a.createElement(X.a,{secondary:!0,pointing:!0},r.a.createElement(X.a.Item,{name:"All Events",active:!0}),r.a.createElement(X.a.Item,{name:"Past Events"}),r.a.createElement(X.a.Item,{name:"Future Events"}),r.a.createElement(X.a.Item,{name:"Events Hosted"})),r.a.createElement(ye.a.Group,{itemsPerRow:5},r.a.createElement(ye.a,null,r.a.createElement(S.a,{src:"/assets/categoryImages/drinks.jpg"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{textAlign:"center"},"Event Title"),r.a.createElement(ye.a.Meta,{textAlign:"center"},"28th March 2018 at 10:00 PM"))),r.a.createElement(ye.a,null,r.a.createElement(S.a,{src:"/assets/categoryImages/drinks.jpg"}),r.a.createElement(ye.a.Content,null,r.a.createElement(ye.a.Header,{textAlign:"center"},"Event Title"),r.a.createElement(ye.a.Meta,{textAlign:"center"},"28th March 2018 at 10:00 PM"))))))):r.a.createElement(W,null)};var xe=function(){return r.a.createElement(g.a.Column,{width:4},r.a.createElement(X.a,{vertical:!0},r.a.createElement(J.a,{icon:"user",attached:!0,inverted:!0,color:"grey",content:"Profile"}),r.a.createElement(X.a.Item,{as:o.c,to:"/settings/basic"},"Basics"),r.a.createElement(X.a.Item,{as:o.c,to:"/settings/about"},"About Me"),r.a.createElement(X.a.Item,{as:o.c,to:"/settings/photo"},"My Photos")),r.a.createElement(g.a.Row,null),r.a.createElement(X.a,{vertical:!0},r.a.createElement(J.a,{icon:"settings",attached:!0,inverted:!0,color:"grey",content:"Account"}),r.a.createElement(X.a.Item,{as:o.c,to:"/settings/account"},"My Account")))},ke=a(24),Se=a(38),Ce=a(764),De=a(771),Fe=a(762),Pe=a(44),Le=a(388),Re=a.n(Le),Ie=(a(607),a(39));var Ae=function(e){var t=e.placeholder,a=e.error,n=(e.width,e.setValue),c=e.triggerValidation,l=e.name,o=e.value,i=Object(Pe.a)(e,["placeholder","error","width","setValue","triggerValidation","name","value"]);return r.a.createElement(Ie.a,{error:!Object(ke.isEmpty)(a)},r.a.createElement(Re.a,Object.assign({name:l,selected:o?new Date(o):null,onChange:function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(l,t),c(l);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholderText:t,dateFormat:"dd/MM/yyyy HH:mm",timeFormat:"HH:mm",showYearDropDown:!0,dropdownMode:"select"},i)),!Object(ke.isEmpty)(a)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},a))},Me=a(392),Ue=a.n(Me),Ne=a(769),Te=a(123),Be=a(73),Ve=a(126),ze=a(405),He=a(391),Ge=a.n(He),qe=a(761),_e=Object(qe.a)({displayName:"AlgoliaPlaces",getProvidedProps:function(){return{}},refine:function(e,t,a){return Object(R.a)(Object(R.a)({},t),{},{aroundLatLng:a,boundingBox:{}})},getSearchParameters:function(e,t,a){var n=a.aroundLatLng||t.defaultRefinement;return e.setQueryParameter("insideBoundingBox").setQueryParameter("aroundLatLng","".concat(n.lat,", ").concat(n.lng))}})(function(e){Object(Ve.a)(a,e);var t=Object(ze.a)(a);function a(){var e;Object(Te.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).createRef=function(t){return e.element=t},e}return Object(Be.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.refine,n=t.defaultRefinement,r=t.value,c=Ge()({container:this.element,useDeviceLocation:!0});c.setVal(r),c.on("change",(function(t){e.props.handleChange&&e.props.handleChange(t),a(t.suggestion.latlng)})),c.on("clear",(function(){a(n)}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement("input",{ref:this.createRef,type:"search",id:"address-input",placeholder:this.props.placeholder}))}}]),a}(n.Component)),Ye=Ue()("latency","6be0576ff61c053d5f9a3225e2a90f76");var Qe=function(e){var t=e.name,a=e.error,n=e.setValue,c=e.placeholder,l=e.value;return r.a.createElement(Ce.a.Field,{error:!Object(ke.isEmpty)(a)},r.a.createElement(Ne.a,{indexName:"airports",searchClient:Ye},r.a.createElement(_e,{key:l,value:l,defaultRefinement:{lat:37.7793,lng:-122.419},handleChange:function(e){var a=e.suggestion,r=a.value,c=a.latlng,l=c.lat,o=c.lng;n(t,r),n("lat",l),n("lng",o)},placeholder:c})),!Object(ke.isEmpty)(a)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},a))};var We=function(e){var t=e.error,a=e.value,n=e.type,c=e.name,l=e.register,o=e.label;return r.a.createElement(Ce.a.Field,{error:!Object(ke.isEmpty)(t)},r.a.createElement("div",{className:"ui radio"},r.a.createElement("input",{value:a,type:n,name:c,ref:l})," ",r.a.createElement("label",null,o)),!Object(ke.isEmpty)(t)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},t))},Je=function(e){var t=e.error,a=e.width,n=e.register,c=e.placeholder,l=void 0===c?"":c,o=e.type,i=void 0===o?"text":o,s=e.name,u=e.fieldProps,m=Object(Pe.a)(e,["error","width","register","placeholder","type","name","fieldProps"]);return r.a.createElement(Ce.a.Field,Object.assign({error:!Object(ke.isEmpty)(t),width:a},u),r.a.createElement("input",Object.assign({type:i,name:s,placeholder:l,ref:n},m)),!Object(ke.isEmpty)(t)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},t))},Ke=function(e){var t,a,c,l,o=Object(n.useState)(!1),s=Object(E.a)(o,2),u=s[0],m=s[1],d=Object(i.useSelector)((function(e){return e.firebase.profile})),g=Object(Se.c)({mode:"all",defaultValues:Object(R.a)(Object(R.a)({},d),{},{dateOfBirth:null===d||void 0===d||null===(t=d.dateOfBirth)||void 0===t?void 0:t.toDate()})}),f=g.register,h=g.formState,b=g.errors,O=g.setValue,j=g.trigger,w=g.getValues,x=g.handleSubmit,S=g.watch,C=g.setError;Object(n.useEffect)((function(){f({name:"dateOfBirth"}),f({name:"origin"}),m(!0)}),[]),Object(n.useEffect)((function(){!Object(ke.isEmpty)(d)&&u&&(O("displayName",d.displayName),O("city",(null===d||void 0===d?void 0:d.origin)||""),O("dateOfBirth",(null===d||void 0===d?void 0:d.dateOfBirth)?d.dateOfBirth.toDate():""),O("gender",d.gender||""))}),[d]);var D=Object(le.useFirebase)(),P=function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(R.a)({},t)).dateOfBirth&&(a.dateOfBirth=new Date(a.dateOfBirth)),e.prev=2,e.next=5,D.updateProfile(a);case 5:A.toastr.success("Success","Profile successfully updated"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),C("general",{message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(y.a,null,r.a.createElement(J.a,{dividing:!0,size:"large",content:"Basics"}),r.a.createElement(Ce.a,{onSubmit:x(P)},r.a.createElement(Je,{name:"displayName",type:"text",placeholder:"Known As",register:f({required:{message:"Please enter your name",value:!0}}),error:null===b||void 0===b||null===(a=b.displayName)||void 0===a?void 0:a.message}),r.a.createElement(Ce.a.Group,{inline:!0},r.a.createElement("label",null,"Gender:"),r.a.createElement(We,{type:"radio",name:"gender",value:"male",label:"Male",register:f}),r.a.createElement(We,{type:"radio",value:"female",name:"gender",label:"Female",register:f})),r.a.createElement(Ae,{width:8,name:"dateOfBirth",placeholder:"Date of Birth",value:S("dateOfBirth"),setValue:O,triggerValidation:j,showMonthDropdown:!0,showYearDropdown:!0,dateFormat:"yyyy-MM-dd",maxDate:F()().subtract(18,"years").toDate()}),r.a.createElement(Qe,{name:"origin",placeholder:"Home Town",setValue:O,value:w("origin")||""}),(null===b||void 0===b||null===(c=b.general)||void 0===c?void 0:c.message)&&r.a.createElement(De.a,{error:!0,list:[null===b||void 0===b||null===(l=b.general)||void 0===l?void 0:l.message]}),r.a.createElement(Fe.a,null),r.a.createElement(k.a,{size:"large",positive:!0,content:"Update Profile",loading:h.isSubmitting})))};var Ze=function(e){var t=e.value,a=e.name,n=e.placeholder,c=e.error,l=e.triggerValidation,o=e.setValue,i=e.options,s=e.multiple,u=Object(Pe.a)(e,["value","name","placeholder","error","triggerValidation","setValue","options","multiple"]);return r.a.createElement(Ce.a.Field,Object.assign({error:!Object(ke.isEmpty)(c)},u),r.a.createElement(Ce.a.Select,{multiple:s,value:t,name:a,placeholder:n,onChange:function(){var e=Object(v.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,r=a.value,o(n,r),e.next=4,l(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),options:i}),!Object(ke.isEmpty)(c)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},c))},Xe=function(e){var t=e.error,a=e.width,n=e.register,c=e.placeholder,l=void 0===c?"":c,o=e.name,i=Object(Pe.a)(e,["error","width","register","placeholder","name"]);return r.a.createElement(Ce.a.Field,{error:!Object(ke.isEmpty)(t),width:a},r.a.createElement("textarea",Object.assign({name:o,placeholder:l,ref:n},i)),!Object(ke.isEmpty)(t)&&r.a.createElement(j.a,{basic:!0,color:"red",pointing:!0},t))},$e=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],et=function(){var e,t,a=Object(i.useSelector)((function(e){return e.firebase.profile})),c=Object(Se.c)({defaultValues:Object(R.a)({interests:[],origin:""},a)}),l=c.register,o=c.setValue,s=c.setError,u=c.handleSubmit,m=c.watch,d=c.formState,E=c.trigger,g=c.errors;Object(n.useEffect)((function(){l({name:"interests"}),l({name:"origin"})}),[]),Object(n.useEffect)((function(){Object(ke.isEmpty)(a)||(o("status",null===a||void 0===a?void 0:a.status),o("about",null===a||void 0===a?void 0:a.about),o("interests",(null===a||void 0===a?void 0:a.interests)||[]),o("occupation",null===a||void 0===a?void 0:a.occupation),o("origin",null===a||void 0===a?void 0:a.origin))}),[a]);var f=Object(le.useFirebase)(),h=function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.a)({},t),e.prev=1,e.next=4,f.updateProfile(a);case 4:A.toastr.success("Success","Profile successfully updated"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s("general",{message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(y.a,null,r.a.createElement(J.a,{dividing:!0,size:"large",content:"About Me"}),r.a.createElement("p",null,"Complete your profile to get the most out of this site"),r.a.createElement(Ce.a,{onSubmit:u(h)},r.a.createElement(Ce.a.Group,{inline:!0},r.a.createElement("label",null,"Tell us your status: "),r.a.createElement(We,{name:"status",type:"radio",value:"single",label:"Single",register:l}),r.a.createElement(We,{name:"status",type:"radio",value:"relationship",label:"Relationship",register:l}),r.a.createElement(We,{name:"status",type:"radio",value:"married",label:"Married",register:l})),r.a.createElement(Fe.a,null),r.a.createElement("label",null,"Tell us about yourself"),r.a.createElement(Xe,{style:{marginTop:"1rem"},rows:5,name:"about",placeholder:"About Me",register:l}),r.a.createElement(Ze,{style:{marginTop:"1rem"},name:"interests",options:$e,multiple:!0,placeholder:"Select your interests",setValue:o,triggerValidation:E,value:m("interests")}),r.a.createElement(Je,{name:"occupation",type:"text",placeholder:"Occupation",register:l}),r.a.createElement(Qe,{value:m("origin"),name:"origin",placeholder:"Country of Origin",setValue:o}),r.a.createElement(Fe.a,null),(null===g||void 0===g||null===(e=g.general)||void 0===e?void 0:e.message)&&r.a.createElement(De.a,{error:!0,list:[null===g||void 0===g||null===(t=g.general)||void 0===t?void 0:t.message]}),r.a.createElement(k.a,{size:"large",positive:!0,content:"Update Profile",type:"submit",loading:d.isSubmitting})))},tt=a(402),at=a(394);var nt=function(){var e=Object(n.useState)([]),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(E.a)(l,2),s=o[0],u=o[1],m=Object(n.useRef)(null),d=Object(i.useSelector)((function(e){return e.firebase})),f=d.auth,h=d.profile,b=Object(le.useFirebase)(),O=Object(le.useFirestore)();Object(le.useFirestoreConnect)([{collection:"users",doc:f.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]);var j=Object(i.useSelector)((function(e){return e.firestore.ordered.photos})),x=Object(tt.a)({onDrop:function(e){c(e)},multiple:!1,accept:"image/*"}),C=x.getRootProps,D=x.getInputProps,F=function(){var e=Object(v.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),t=b.auth().currentUser,n="".concat(t.uid,"/user_images"),r={name:a[0].name},m.current.getCroppedCanvas().toBlob(function(){var e=Object(v.a)(p.a.mark((function e(l){var o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.uploadFile(n,l,null,r);case 3:return o=e.sent,e.next=6,o.uploadTaskSnapshot.ref.getDownloadURL();case 6:return i=e.sent,e.next=9,O.get("users/".concat(t.uid));case 9:if(e.sent.data().photoURL){e.next=15;break}return e.next=13,b.updateProfile({photoURL:i});case 13:return e.next=15,t.updateProfile({photoURL:i});case 15:return e.next=17,O.add({collection:"users",doc:t.uid,subcollections:[{collection:"photos"}]},{name:a[0].name,url:i});case 17:u(!1),c([]),A.toastr.success("Success","Photo has been uploaded"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),u(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.auth().currentUser,e.prev=1,e.next=4,b.deleteFile("".concat(a.uid,"/user_images/").concat(t.name));case 4:return e.next=6,O.delete({collection:"users",doc:a.uid,subcollections:[{collection:"photos",doc:t.id}]});case 6:A.toastr.success("Success","Photo deleted"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),A.toastr.error("Failed","Something failed"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.updateProfile({photoURL:t.url});case 3:A.toastr.success("Success","Main photo updated"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),A.toastr.error("Failed","Something failed"),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(y.a,null,r.a.createElement(J.a,{dividing:!0,size:"large",content:"Your Photos"}),r.a.createElement(g.a,null,r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:4},r.a.createElement(J.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement("div",Object.assign({},C(),{className:"dropzone-wrapper"}),r.a.createElement("input",D()),r.a.createElement(w.a,{name:"upload",size:"big"}),r.a.createElement("span",null,"Drop image here or click to add"))),r.a.createElement(g.a.Column,{width:1}),r.a.createElement(g.a.Column,{width:4},r.a.createElement(J.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),a[0]&&r.a.createElement(at.a,{src:a[0]&&URL.createObjectURL(a[0]),style:{height:200,width:"100%"},initialAspectRatio:1,preview:".img-preview",viewMode:1,guides:!0,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,onInitialized:function(e){return m.current=e}})),r.a.createElement(g.a.Column,{width:1}),r.a.createElement(g.a.Column,{width:4},r.a.createElement(J.a,{sub:!0,color:"teal",content:"Step 3 - Preview and Upload"}),a[0]&&r.a.createElement("div",{style:{width:"200px",height:"200px "}},r.a.createElement("div",{className:"img-preview",style:{width:"200px",height:"200px ",overflow:"hidden"}})),a[0]&&r.a.createElement(k.a.Group,{style:{width:"100%"}},r.a.createElement(k.a,{style:{width:"50%"},onClick:F,positive:!0,icon:"check",disabled:s,loading:s}),r.a.createElement(k.a,{style:{width:"50%"},icon:"close",disabled:s,onClick:function(){c([])}}))))),r.a.createElement(Fe.a,null),r.a.createElement(J.a,{sub:!0,color:"teal",content:"All Photos"}),r.a.createElement(ye.a.Group,{itemsPerRow:4},r.a.createElement(ye.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(S.a,{src:h.photoURL,alt:"",style:{minHeight:150,flex:1}}),r.a.createElement(k.a,{positive:!0},"Main Photo")),j&&j.map((function(e){return r.a.createElement(ye.a,{key:e.id,style:{display:"flex",flexDirection:"column"}},r.a.createElement(S.a,{src:e.url,alt:"No image",style:{minHeight:150,flex:1}}),r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(k.a,{basic:!0,color:"green",onClick:function(){L(e)}},"Main"),r.a.createElement(k.a,{basic:!0,icon:"trash",color:"red",onClick:function(){P(e)}})))}))))},rt=a(399),ct=a(156),lt=ct.a().shape({password:ct.c().min(6).required("Please enter password"),confirmPassword:ct.c().oneOf([ct.b("password"),null],"Passwords must match")}),ot=function(){var e,t,a,n,c,l=Object(Se.c)({resolver:Object(rt.a)(lt),mode:"all",reValidateMode:"onChange"}),o=l.register,s=l.errors,u=l.handleSubmit,m=l.formState,d=l.reset,E=l.setError,g=Object(i.useSelector)((function(e){return e.firebase.auth.providerData[0].providerId})),f=Object(le.useFirebase)(),h=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.auth().currentUser.updatePassword(t.password);case 3:d(),A.toastr.success("Success","Your password has beed updated!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E("general",{message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(y.a,null,r.a.createElement(J.a,{dividing:!0,size:"large",content:"Account"}),"password"===g&&r.a.createElement("div",null,r.a.createElement(J.a,{color:"teal",sub:!0,content:"Change password"}),r.a.createElement("p",null,"Use this form to update your account settings"),r.a.createElement(Ce.a,{onSubmit:u(h)},r.a.createElement(Je,{name:"password",type:"password",pointing:"left",placeholder:"New Password",register:o({required:{message:"Required",value:!0}}),error:null===s||void 0===s||null===(e=s.password)||void 0===e?void 0:e.message,autoComplete:"new-password"}),r.a.createElement(Je,{name:"confirmPassword",type:"password",pointing:"left",placeholder:"Confirm Password",register:o({required:{message:"Required",value:!0}}),error:null===s||void 0===s||null===(t=s.confirmPassword)||void 0===t?void 0:t.message,autoComplete:"new-password"}),null!==(a=null===s||void 0===s||null===(n=s.general)||void 0===n?void 0:n.message)&&void 0!==a?a:r.a.createElement(De.a,{style:{color:"red"},error:!0,header:"Update password failed",list:[null===s||void 0===s||null===(c=s.general)||void 0===c?void 0:c.message]}),r.a.createElement(Fe.a,null),r.a.createElement(k.a,{disabled:!m.isValid||m.isSubmitting,size:"large",positive:!0,content:"Update Password",type:"submit",loading:m.isSubmitting}))),r.a.createElement(y.a,null,"facebook.com"===g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{color:"teal",sub:!0,content:"Facebook Account"}),r.a.createElement("p",null,"Please visit Facebook to update your account settings"),r.a.createElement(k.a,{type:"button",color:"facebook"},r.a.createElement(w.a,{name:"facebook"}),"Go to Facebook")),"google.com"===g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{color:"teal",sub:!0,content:"Google Account"}),r.a.createElement("p",null,"Please visit Google to update your account settings"),r.a.createElement(k.a,{type:"button",color:"google plus"},r.a.createElement(w.a,{name:"google plus"}),"Go to Google"))))};var it=function(){return r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:12},r.a.createElement(u.d,null,r.a.createElement(u.a,{exact:!0,from:"/settings",to:"/settings/basic"}),r.a.createElement(u.b,{path:"/settings/basic",component:Ke}),r.a.createElement(u.b,{path:"/settings/about",component:et}),r.a.createElement(u.b,{path:"/settings/photo",component:nt}),r.a.createElement(u.b,{path:"/settings/account",component:ot}))),r.a.createElement(g.a.Column,{width:4},r.a.createElement(xe,null)))},st=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}];var ut=function(e){var t,a,c,l,o,s=e.match,u=e.history,m=s.params.id,d=Object(n.useState)(!1),f=Object(E.a)(d,2),h=f[0],b=f[1],O=Object(n.useState)({}),j=Object(E.a)(O,2),w=j[0],x=j[1],S=Object(i.useDispatch)(),C=Object(le.useFirestore)(),D=Object(Se.c)({defaultValues:Object(R.a)({},w)}),F=D.register,P=D.handleSubmit,L=D.errors,I=D.setValue,M=D.trigger,U=D.watch;return Object(n.useEffect)((function(){function e(){return(e=Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.get("events/".concat(m));case 2:(t=e.sent).exists&&x(t.data());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}F({name:"category"},{required:{message:"Please choose a category",value:!0}}),F({name:"date"},{required:{message:"Please choose a valid date",value:!0}}),F({name:"venue"},{required:{message:"Please chose a valid venue",value:"true"}}),F({name:"lat"},{required:!0}),F({name:"lng"},{required:!0}),function(){e.apply(this,arguments)}(),b(!0)}),[]),Object(n.useEffect)((function(){!Object(ke.isEmpty)(w)&&h&&(I("lat",w.venueLatLng.lat),I("lng",w.venueLatLng.lng),I("title",w.title),I("category",w.category),I("description",w.description),I("venue",w.venue),I("date",w.date.toDate()),I("id",m))}),[w]),Object(ke.isEmpty)(w)&&!h?r.a.createElement(W,null):r.a.createElement(g.a,null,r.a.createElement(g.a.Column,{width:10},r.a.createElement(y.a,null,r.a.createElement(Ce.a,{onSubmit:P((function(e){Object(ke.isEmpty)(e.id)?(S(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l,o,i,s,u,m;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=r.getFirestore,o=l(),i=c().auth().currentUser,s=n().firebase.profile.photoURL,u=N(i,s,e),t.prev=5,t.next=8,o.add({collection:"events"},u);case 8:return m=t.sent,t.next=11,o.set("event_attendee/".concat(m.id,"_").concat(i.uid),{eventId:m.id,userUid:i.uid,eventDate:e.date,host:!0});case 11:A.toastr.success("Success","Event has beed created"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0),A.toastr.error("Oops","Something went wrong");case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e)),u.push("/events")):(S(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirestore,l=c(),t.prev=2,t.next=5,l.update("events/".concat(e.id),Object(R.a)(Object(R.a)({},e),{},{venueLatLng:{lat:e.lat,lng:e.lng}}));case 5:A.toastr.success("Success","Event has beed updated"),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(2),console.log("my event",e),console.log(t.t0),A.toastr.error("Oops","Something went wrong");case 13:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e)),u.goBack())}))},r.a.createElement(J.a,{sub:!0,color:"teal"},"Event Details"),r.a.createElement(Ce.a.Field,null,r.a.createElement("input",{ref:F,name:"id",hidden:!0})),r.a.createElement(Je,{name:"title",type:"text",placeholder:"Give your event a title",register:F({required:{message:"Please enter event title",value:!0}}),error:(null===L||void 0===L||null===(t=L.title)||void 0===t?void 0:t.message)||""}),r.a.createElement(Ze,{options:st,value:U("category"),name:"category",placeholder:"What's your event about?",error:(null===L||void 0===L||null===(a=L.category)||void 0===a?void 0:a.message)||"",setValue:I,triggerValidation:M}),r.a.createElement(Xe,{rows:6,name:"description",type:"description",placeholder:"Tell us about your event",register:F({required:{message:"required",value:!0}}),error:(null===L||void 0===L||null===(c=L.title)||void 0===c?void 0:c.message)||""}),r.a.createElement(J.a,{sub:!0,color:"teal",style:{marginBottom:"1rem"}},"Event Location Details"),r.a.createElement(Qe,{name:"venue",placeholder:"Venue event is taking place",setValue:I,error:null===L||void 0===L||null===(l=L.venue)||void 0===l?void 0:l.message,value:U("venue")||""}),r.a.createElement(Ae,{value:U("date"),name:"date",placeholder:"Date and Time of event",error:(null===L||void 0===L||null===(o=L.date)||void 0===o?void 0:o.message)||"",setValue:I,triggerValidation:M,showTimeSelect:!0}),r.a.createElement(k.a,{positive:!0,type:"submit"},"Submit"),r.a.createElement(k.a,{style:{marginLeft:"1rem"},onClick:function(){u.goBack()},type:"button"},"Cancel"),m&&r.a.createElement(k.a,{onClick:function(){S(function(e,t){return function(){var a=Object(v.a)(p.a.mark((function a(n,r,c){var l,o;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=c.getFirestore,o=l(),a.prev=2,a.next=5,o.update("events/".concat(t),{cancelled:e});case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(e,t,n){return a.apply(this,arguments)}}()}(!w.cancelled,m)),x((function(e){return Object(R.a)(Object(R.a)({},e),{},{cancelled:!e.cancelled})}))},floated:"right",type:"button",color:w.cancelled?"green":"red"},w.cancelled?"Reactivate event":"Cancel event")))))};var mt=function(){return r.a.createElement(y.a,{inverted:!0,textAlign:"center",vertical:!0,className:"homepage"},r.a.createElement(s.a,{text:!0},r.a.createElement(J.a,{as:"h1",inverted:!0},r.a.createElement(S.a,{size:"massive",src:"/re-vents/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Re-vents"),r.a.createElement(k.a,{size:"huge",inverted:!0,as:o.b,to:"/events"},"Get started",r.a.createElement(w.a,{name:"right arrow",inverted:!0}))))},dt=a(768);var pt=function(){var e=Object(i.useDispatch)();return r.a.createElement("div",null,r.a.createElement(k.a,{type:"button",style:{marginBottom:"10px"},fluid:!0,color:"facebook",onClick:function(){e(re("facebook"))}},r.a.createElement(w.a,{name:"facebook"})," Login with Facebook"),r.a.createElement(k.a,{type:"button",fluid:!0,style:{marginBottom:"10px"},color:"google plus",onClick:function(){e(re("google"))}},r.a.createElement(w.a,{name:"google plus"}),"Login with Google"),r.a.createElement(k.a,{type:"button",fluid:!0,style:{marginBottom:"10px"},onClick:function(){e(re("github"))}},r.a.createElement(w.a,{name:"github"}),"Login with Github"))},vt=function(){var e=Object(Se.c)({mode:"all",reValidateMode:"onChange"}),t=e.register,a=e.handleSubmit,n=e.formState,c=Object(i.useSelector)((function(e){return e.auth})).logInError,l=Object(i.useDispatch)();return r.a.createElement(Ce.a,{error:!0,size:"large",onSubmit:a((function(e){l(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(a,n,r){var c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,l=c(),t.prev=2,t.next=5,l.auth().signInWithEmailAndPassword(e.email,e.password);case 5:a(ee()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),a(ae(t.t0));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e))}))},r.a.createElement(y.a,null,r.a.createElement(Je,{name:"email",type:"text",placeholder:"Email Address",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(Je,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",register:t({required:{message:"Required",value:!0}})}),c&&r.a.createElement(De.a,{error:!0,header:"Log in failed",list:[null===c||void 0===c?void 0:c.message]}),r.a.createElement(k.a,{fluid:!0,size:"large",color:"teal",disabled:!n.isValid||n.isSubmitting,loading:n.isSubmitting},"Login"),r.a.createElement(Fe.a,{content:"Or",horizontal:!0}),r.a.createElement(pt,null)))},Et=function(){var e=Object(Se.c)({mode:"all",reValidateMode:"onChange"}),t=e.register,a=e.handleSubmit,n=e.formState,c=Object(i.useSelector)((function(e){return e.auth})).registerUserError,l=Object(i.useDispatch)();return r.a.createElement(Ce.a,{error:!0,size:"large",onSubmit:a((function(e){var t;l((t=e,function(){var e=Object(v.a)(p.a.mark((function e(a,n,r){var c,l,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.getFirebase,l=c(),o=l.firestore(),e.prev=3,e.next=6,l.auth().createUserWithEmailAndPassword(t.email,t.password);case 6:return e.next=8,l.auth().currentUser.updateProfile({displayName:t.displayName});case 8:return i={displayName:t.displayName,createdAt:l.firestore.FieldValue.serverTimestamp()},e.next=11,o.collection("users").doc("/".concat(l.auth().currentUser.uid)).set(Object(R.a)({},i));case 11:a(ee()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),a(te(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,a,n){return e.apply(this,arguments)}}()))}))},r.a.createElement(y.a,null,r.a.createElement(Je,{name:"displayName",type:"text",placeholder:"Know As",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(Je,{name:"email",type:"email",placeholder:"Email",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(Je,{name:"password",type:"password",placeholder:"Password",register:t({required:{message:"Required",value:!0},minLength:{message:"At lease 6 characters",value:6}})}),c&&r.a.createElement(De.a,{error:!0,header:"Register failed",list:[c.message]}),r.a.createElement(k.a,{fluid:!0,size:"large",color:"teal",disabled:!n.isValid||n.isSubmitting,loading:n.isSubmitting},"Register"),r.a.createElement(Fe.a,{content:"Or",horizontal:!0}),r.a.createElement(pt,null)))},gt={LogInModal:function(){var e=Object(i.useDispatch)();return r.a.createElement(dt.a,{size:"mini",open:!0,onClose:function(){e(ee())}},r.a.createElement(dt.a.Header,null,"Login to Re-vents"),r.a.createElement(dt.a.Content,null,r.a.createElement(dt.a.Description,null,r.a.createElement(vt,null))))},RegisterModal:function(){var e=Object(i.useDispatch)();return r.a.createElement(dt.a,{size:"mini",open:!0,onClose:function(){e(ee())}},r.a.createElement(dt.a.Header,null,"Sign Up to Re-vents"),r.a.createElement(dt.a.Content,null,r.a.createElement(dt.a.Description,null,r.a.createElement(Et,null))))}};var ft=function(){var e=Object(i.useSelector)((function(e){return e.modals})),t=null;if(e){var a=e.modalType,n=e.modalProps,c=gt[a];t=r.a.createElement(c,n)}return t};var ht=function(e){var t=e.children,a=Object(i.useSelector)((function(e){return e.firebase.auth}));return Object(le.isLoaded)(a)?t:r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(f.a,{inverted:!0,content:"Loading..."}))};var bt,yt,Ot,jt,wt=function(){return r.a.createElement(ht,null,r.a.createElement("div",null,r.a.createElement(ft,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:mt})),r.a.createElement(u.b,{path:"/(.+)",render:function(){return r.a.createElement("div",null,r.a.createElement(se,null),r.a.createElement(s.a,{style:{marginTop:"5rem"}},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/events",exact:!0,component:Z}),r.a.createElement(u.b,{path:"/events/:id",component:he}),r.a.createElement(u.b,{path:"/manage/:id",component:ut}),r.a.createElement(u.b,{path:"/people",component:be}),r.a.createElement(u.b,{path:"/profile/:id",component:we}),r.a.createElement(u.b,{path:"/settings",component:it}),r.a.createElement(u.b,{path:"/create-event",component:ut}))))}})))},xt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,780)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),c(e),l(e)}))},kt=a(98),St=a(400),Ct=a(401),Dt=a(763),Ft=[],Pt=Object(Dt.a)((bt={},Object(U.a)(bt,_,(function(e,t){return t.payload})),Object(U.a)(bt,q,(function(e){return Ft})),bt),Ft),Lt=Object(Dt.a)((yt={},Object(U.a)(yt,$,(function(e,t){return t.payload})),Object(U.a)(yt,ee,(function(){return null})),yt),null),Rt={logInError:null,registerUserError:null},It=Object(Dt.a)((Ot={},Object(U.a)(Ot,ae,(function(e,t){var a=t.payload;return Object(R.a)(Object(R.a)({},e),{},{logInError:a})})),Object(U.a)(Ot,te,(function(e,t){var a=t.payload;return Object(R.a)(Object(R.a)({},e),{},{registerUserError:a})})),Object(U.a)(Ot,ne,(function(e){return Rt})),Ot),Rt),At=Object(Dt.a)((jt={},Object(U.a)(jt,z,(function(e){return Object(R.a)(Object(R.a)({},e),{},{loading:!0})})),Object(U.a)(jt,H,(function(e){return Object(R.a)(Object(R.a)({},e),{},{loading:!1})})),Object(U.a)(jt,G,(function(e){return Object(R.a)(Object(R.a)({},e),{},{loading:!1})})),jt),{loading:!1}),Mt=a(129),Ut=Object(kt.combineReducers)({events:Pt,modals:Lt,auth:It,async:At,toastr:A.reducer,firebase:le.firebaseReducer,firestore:Mt.firestoreReducer}),Nt=[St.a.withExtraArgument({getFirebase:le.getFirebase,getFirestore:Mt.getFirestore})],Tt=[kt.applyMiddleware.apply(void 0,Nt)],Bt=Ct.composeWithDevTools.apply(void 0,Tt.concat([Object(Mt.reduxFirestore)(V)])),Vt=Object(kt.createStore)(Ut,Bt);function zt(e){var t=e.children,a=Object(u.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t}a(743),a(744),a(745);var Ht={firebase:V,config:{userProfile:"users",attachAuthIsReady:!0,firebaseStateName:"firebase",useFirestoreForProfile:!0,profileFactory:function(e,t,a){return{displayName:e.displayName,email:t.email,photoURL:t.avatarUrl,createdAt:a.firestore.FieldValue.serverTimestamp()}}},dispatch:Vt.dispatch,createFirestoreInstance:Mt.createFirestoreInstance};l.a.render(r.a.createElement(i.Provider,{store:Vt},r.a.createElement(le.ReactReduxFirebaseProvider,Ht,r.a.createElement(o.a,null,r.a.createElement(zt,null,r.a.createElement(M.a,{timeOut:4e3,position:"top-right",transitionIn:"fadeIn",transitionOut:"fadeOut"}),r.a.createElement(wt,null))))),document.getElementById("root")),xt()}},[[746,1,2]]]);
//# sourceMappingURL=main.ea9d5ffc.chunk.js.map