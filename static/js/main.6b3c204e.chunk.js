(this["webpackJsonphangout-app"]=this["webpackJsonphangout-app"]||[]).push([[0],{433:function(e,t,a){},698:function(e,t){},775:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),o=a.n(c),l=a(18),i=a(12),s=(a(433),a(789)),u=a(32),d=a(26),m=a(8),p=a.n(m),v=a(14),f=a(13),h=a(23),E=a(411),b=a(788),g=a(384),y=a.n(g),O=a(275),j=a(796),w=a(158),x=a(84),k=a(797),S=a(802),C=a(410);var D=function(e){var t=e.photoURL,a=e.attendeeId;return r.a.createElement(k.a.Item,null,r.a.createElement(C.a,{as:l.b,to:"/profile/".concat(a),size:"mini",circular:!0,src:t,alt:""}))},R=a(39),U=a.n(R);var L=function(e){var t=e.event,a=e.handleDeleteEvent,n=t.title,c=t.date,o=t.description,s=t.venue,u=t.hostedBy,d=t.hostPhotoURL,m=t.attendees,p=t.cancelled,v=Object(i.useSelector)((function(e){return e.firebase.auth}));return r.a.createElement(O.a.Group,null,r.a.createElement(O.a,null,r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Image,{size:"tiny",circular:!0,src:d,alt:""}),r.a.createElement(j.a.Content,null,r.a.createElement(j.a.Header,null,n),r.a.createElement(j.a.Description,null,"Hosted by"," ",r.a.createElement(l.b,{to:"/profile/".concat(t.hostUid),href:"/"},u)),p&&r.a.createElement(w.a,{ribbon:"right",color:"red",style:{top:"-40px"}},"This event has been cancelled"))))),r.a.createElement(O.a,null,r.a.createElement("span",null,r.a.createElement(x.a,{name:"clock"})," ",U()(c.toDate()).format("dddd D-MM-yyyy HH:mm").toString()," |",r.a.createElement(x.a,{name:"marker"})," ",s)),r.a.createElement(O.a,{secondary:!0},r.a.createElement(k.a,{horizontal:!0},m&&Object.keys(m).map((function(e){return r.a.createElement(D,Object.assign({key:e},m[e],{attendeeId:e}))})))),r.a.createElement(O.a,{clearing:!0},r.a.createElement("span",null,o),t.hostUid===v.uid&&r.a.createElement(S.a,{color:"red",floated:"right",onClick:function(){return a(t.id)}},"Delete"),r.a.createElement(S.a,{as:l.b,to:"/events/".concat(t.id),color:"teal",floated:"right"},"View")))};var A=function(e){var t=e.events,a=e.handleDeleteEvent,n=e.getMoreEvents,c=e.loading,o=e.moreEvents;return r.a.createElement("div",null,r.a.createElement("h1",null,"Event List"),r.a.createElement("div",null,0!==t.length&&r.a.createElement(y.a,{pageStart:0,loadMore:n,hasMore:!c&&o,initialLoad:!1},t.map((function(e,t){return r.a.createElement(L,{key:e.id,event:e,handleDeleteEvent:a})})))))},F=a(806),I=a(20),P=a.n(I),N=a(10),M=function(e,t,a){return delete a.id,a.date=U()(a.date).toDate(),Object(v.a)(Object(v.a)({},a),{},{venueLatLng:{lat:a.lat,lng:a.lng},hostUid:e.uid,hostPhotoURL:t||"/re-vents/assets/user.png",hostedBy:e.displayName,created:Date.now(),attendees:Object(N.a)({},e.uid,{going:!0,joinDate:Date.now(),photoURL:t||"/re-vents/assets/user.png",displayName:e.displayName,host:!0})})},T=Object(F.a)("RESET_EVENTS"),B=Object(F.a)("FETCH_EVENTS"),V=a(803);var z=function(){return r.a.createElement(V.a,{active:!0,inverted:!0},r.a.createElement(b.a,{inverted:!0,content:"Loading"}))},G=a(804);var H=a(21);var _=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(h.a)(o,2),s=l[0],u=l[1],m=Object(n.useState)(!1),g=Object(h.a)(m,2),y=g[0],O=g[1],j=Object(n.useState)(!0),w=Object(h.a)(j,2),x=w[0],k=w[1],S=Object(n.useState)(!1),C=Object(h.a)(S,2),D=C[0],R=C[1],U=Object(H.useFirebase)(),L=Object(i.useDispatch)(),F=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,o,l,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(new Date,a=U.firestore(),n=a.collection("events"),e.prev=3,R(!0),e.t0=t,!e.t0){e.next=10;break}return e.next=9,a.collection("events").doc(t.id).get();case 9:e.t0=e.sent;case 10:return r=e.t0,c=t?n.orderBy("date").startAfter(r).limit(2):n.orderBy("date").limit(2),e.next=14,c.get();case 14:if(o=e.sent,l=[],0!==o.docs.length){e.next=19;break}return R(!1),e.abrupt("return",o);case 19:for(i=0;i<o.docs.length;++i)s=Object(v.a)(Object(v.a)({},o.docs[i].data()),{},{id:o.docs[i].id}),l.push(s);return u(l),R(!1),e.abrupt("return",o);case 25:e.prev=25,e.t1=e.catch(3),console.log(e.t1),R(!1);case 29:case"end":return e.stop()}}),e,null,[[3,25]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){window.scroll({behavior:"smooth",top:0,left:0}),function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:(t=e.sent)&&t.docs&&t.docs.length>=1&&O(!0),k(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(n.useEffect)((function(){c([].concat(Object(d.a)(a),Object(d.a)(s)))}),[s]);var P=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[a.length-1],e.next=3,F(t);case 3:(n=e.sent)&&n.docs&&n.docs.length<1&&O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x?r.a.createElement(z,null):r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:16},r.a.createElement(A,{loading:D,moreEvents:y,getMoreEvents:P,events:a,handleDeleteEvent:function(e){L(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o,l,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=r.getFirestore,l=o(),i=c().auth().currentUser,t.prev=3,t.next=6,l.delete("event_attendee/".concat(e,"_").concat(i.uid));case 6:return t.next=8,l.delete("events/".concat(e));case 8:I.toastr.success("Success","Event has beed deleted"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),I.toastr.error("Oops","Something went wrong");case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e))}})),r.a.createElement(E.a.Column,{width:16},r.a.createElement(b.a,{active:D})))},q=a(409),Y=Object(F.a)("OPEN_MODAL"),Q=Object(F.a)("CLOSE_MODAL"),W=a(206),J=a.n(W);a(597),a(600),a(780),a(602);J.a.initializeApp({apiKey:"AIzaSyD2BbBIyWlyqYYUyQQdSQjOkgteCT1u0cY",authDomain:"re-vents-290306.firebaseapp.com",databaseURL:"https://re-vents-290306.firebaseio.com",projectId:"re-vents-290306",storageBucket:"re-vents-290306.appspot.com",messagingSenderId:"852703381616",appId:"1:852703381616:web:86b39d8917bdeb0f9c4cb5",measurementId:"G-KF294J0LC5"}),J.a.firestore();var K=J.a,Z=Object(F.a)("ASYNC_ACTION_START"),X=Object(F.a)("ASYNC_ACTION_FINISH"),$=Object(F.a)("ASYNC_ACTION_ERROR"),ee=Object(F.a)("REGISTER_USER_FAILED"),te=Object(F.a)("LOG_IN_FAILED"),ae=Object(F.a)("RESET_AUTH_STATE"),ne=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=c(),t.prev=2,a(Q()),t.next=6,o.login({type:"popup",provider:e});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()},re=function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(n,r){var c,o,l,i,s,u,d,m;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n(Z()),c=K.firestore(),o=new Date,l=c.collection("event_attendee"),a.t0=t,a.next=1===a.t0?7:2===a.t0?9:3===a.t0?11:13;break;case 7:return i=l.where("userUid","==",e).where("eventDate","<=",o).orderBy("eventDate","desc"),a.abrupt("break",15);case 9:return i=l.where("userUid","==",e).where("eventDate",">=",o).orderBy("eventDate","asc"),a.abrupt("break",15);case 11:return i=l.where("userUid","==",e).where("host","==",!0).orderBy("eventDate","desc"),a.abrupt("break",15);case 13:return i=l.where("userUid","==",e).orderBy("eventDate","desc"),a.abrupt("break",15);case 15:return a.prev=15,a.next=18,i.get();case 18:s=a.sent,u=[],d=0;case 21:if(!(d<s.docs.length)){a.next=29;break}return a.next=24,c.collection("events").doc(s.docs[d].data().eventId).get();case 24:m=a.sent,u.push(Object(v.a)(Object(v.a)({},m.data()),{},{id:m.id}));case 26:++d,a.next=21;break;case 29:n(B(u)),n(X()),a.next=37;break;case 33:a.prev=33,a.t1=a.catch(15),console.log(a.t1),n($());case 37:case"end":return a.stop()}}),a,null,[[15,33]])})));return function(e,t){return a.apply(this,arguments)}}()};var ce=function(){var e=Object(i.useDispatch)();return r.a.createElement(q.a.Item,{position:"right"},r.a.createElement(S.a,{basic:!0,inverted:!0,content:"Login",onClick:function(){e(ae()),e(Y({modalType:"LogInModal"}))}}),r.a.createElement(S.a,{basic:!0,inverted:!0,content:"Register",style:{marginLeft:"1rem"},onClick:function(){e(Y({modalType:"RegisterModal"}))}}))},oe=a(794);var le=function(){var e=Object(i.useSelector)((function(e){return e.firebase})),t=e.profile,a=e.auth,n=Object(i.useDispatch)(),c=Object(H.useFirebase)(),o=Object(u.g)();return r.a.createElement(q.a.Item,{position:"right"},r.a.createElement(C.a,{avatar:!0,spaced:"right",src:t.photoURL||"/re-vents/assets/user.png",alt:""}),r.a.createElement(oe.a,{pointing:"top left",text:t.displayName},r.a.createElement(oe.a.Menu,null,r.a.createElement(oe.a.Item,{as:l.b,to:"/create-event",text:"Create Event",icon:"plus"}),r.a.createElement(oe.a.Item,{as:l.b,to:"/profile/".concat(a.uid),text:"My Profile",icon:"user"}),r.a.createElement(oe.a.Item,{as:l.b,to:"/settings",text:"Settings",icon:"settings"}),r.a.createElement(oe.a.Item,{text:"Sign Out",icon:"power",onClick:function(){c.auth().signOut(),o.push("/"),n(ae())}}))))};var ie=function(){var e=Object(i.useSelector)((function(e){return e.firebase})).auth;return r.a.createElement(q.a,{inverted:!0,fixed:"top"},r.a.createElement(s.a,null,r.a.createElement(q.a.Item,{header:!0,as:l.b,to:"/"},r.a.createElement("img",{src:"/re-vents/assets/logo.png",alt:"Logo",style:{marginRight:"0.5rem"}}),"Re-vents"),r.a.createElement(q.a.Item,{as:l.c,to:"/events",name:"Events"}),r.a.createElement(q.a.Item,{as:l.c,to:"/people",name:"People"}),!e.isEmpty&&r.a.createElement(q.a.Item,null,r.a.createElement(S.a,{floated:"right",as:l.b,to:"/create-event",positive:!0,inverted:!0,content:"Create Event"})),e.isLoaded&&!e.isEmpty?r.a.createElement(le,null):r.a.createElement(ce,null)))},se=a(37),ue=a(793),de=a(795),me=a(45),pe=a(24),ve=function(e){var t=e.error,a=e.width,n=e.register,c=e.placeholder,o=void 0===c?"":c,l=e.name,i=Object(me.a)(e,["error","width","register","placeholder","name"]);return r.a.createElement(ue.a.Field,{error:!Object(pe.isEmpty)(t),width:a},r.a.createElement("textarea",Object.assign({name:l,placeholder:o,ref:n},i)),!Object(pe.isEmpty)(t)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},t))},fe=function(e){var t,a=e.eventId,n=e.handleCloseReplyForm,c=e.parentId,o=Object(i.useDispatch)(),l=Object(se.c)({mode:"all"}),s=l.register,u=l.handleSubmit,d=l.formState,m=l.errors,v=l.reset;return r.a.createElement(ue.a,{reply:!0,onSubmit:u((function(e){o(function(e,t,a){return function(){var n=Object(f.a)(p.a.mark((function n(r,c,o){var l,i,s,u,d;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=o.getFirebase,i=l(),s=c().firebase.profile,u=i.auth().currentUser,d={parentId:a,displayName:s.displayName,photoURL:s.photoURL||"/re-vents/assets/user.png",uid:u.uid,text:t.comment,date:Date.now()},n.prev=5,n.next=8,i.push("event_chat/".concat(e),d);case 8:I.toastr.success("Success","New comment added"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(5),console.log(n.t0),I.toastr.error("Oops","Something wrong happened");case 15:case"end":return n.stop()}}),n,null,[[5,11]])})));return function(e,t,a){return n.apply(this,arguments)}}()}(a,e,c)),v(),0!==c&&n&&n()}))},r.a.createElement(ve,{error:null===m||void 0===m||null===(t=m.comment)||void 0===t?void 0:t.message,name:"comment",placeholder:"Add your comment",register:s({required:{message:"Please enter your comment",value:!0}})}),r.a.createElement(S.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,disabled:!d.isValid,loading:d.isSubmitting}))};var he=function(e){var t=e.eventId;Object(H.useFirebaseConnect)("event_chat/".concat(t));var a=Object(i.useSelector)((function(e){return function(e){var t=Object.create(null);e.forEach((function(e){return t[e.id]=Object(v.a)(Object(v.a)({},e),{},{childNodes:[]})}));var a=[];return e.forEach((function(e){e.parentId?t[e.parentId].childNodes.push(t[e.id]):a.push(t[e.id])})),a}(e.firebase.data.event_chat&&e.firebase.data.event_chat[t]&&Object.keys(e.firebase.data.event_chat[t]).map((function(a){return Object(v.a)(Object(v.a)({},e.firebase.data.event_chat[t][a]),{},{id:a})}))||[])})),c=Object(n.useState)(!1),o=Object(h.a)(c,2),s=o[0],u=o[1],d=Object(n.useState)(null),m=Object(h.a)(d,2),p=m[0],f=m[1],E=function(){u(!1),f(null)};return r.a.createElement("div",null,r.a.createElement(O.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(G.a,null,"Chat about this event")),r.a.createElement(O.a,{attached:!0},r.a.createElement(de.a.Group,null,a&&a.map((function(e){return r.a.createElement(de.a,{key:e.id},r.a.createElement(de.a.Avatar,{src:e.photoURL}),r.a.createElement(de.a.Content,null,r.a.createElement(de.a.Author,{as:l.b,to:"/profile/".concat(e.uid)},e.displayName),r.a.createElement(de.a.Metadata,null,r.a.createElement("div",null,U()(e.date).fromNow())),r.a.createElement(de.a.Text,null,e.text),r.a.createElement(de.a.Actions,null,r.a.createElement(de.a.Action,{onClick:function(){return t=e.id,u(!0),void f(t);var t}},"Reply"),s&&p===e.id&&r.a.createElement(fe,{eventId:t,handleCloseReplyForm:E,parentId:e.id}))),e.childNodes&&e.childNodes.map((function(t){return r.a.createElement(de.a.Group,{key:t.id},r.a.createElement(de.a,null,r.a.createElement(de.a.Avatar,{src:e.photoURL}),r.a.createElement(de.a.Content,null,r.a.createElement(de.a.Author,{as:l.b,to:"/profile/".concat(t.uid)},t.displayName),r.a.createElement(de.a.Metadata,null,r.a.createElement("div",null,U()(t.date).fromNow())),r.a.createElement(de.a.Text,null,t.text))))})))}))),r.a.createElement(fe,{parentId:0,eventId:t})))},Ee={position:"absolute",bottom:"5%",left:"5%",width:"100%",color:"white"};var be=function(e){var t=e.event,a=e.isHost,n=e.isGoing,c=e.isAuthenticated,o=Object(i.useDispatch)();return r.a.createElement(O.a.Group,null,r.a.createElement(O.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(C.a,{src:"/re-vents"+"/assets/".concat(t.category,".jpeg"),fluid:!0,alt:""}),r.a.createElement(O.a,{basic:!0,style:Ee},r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Content,null,r.a.createElement(G.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,U()(t.date.toDate()).format("DD/MM/yyyy HH:mm")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement(l.b,{to:"/profile/".concat(t.hostUid),style:{color:"white",fontWeight:"bold"}},t.hostedBy))))))),r.a.createElement(O.a,{attached:"bottom"},!a&&r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(S.a,{onClick:function(){o(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o,l,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=r.getFirestore,l=o(),i=c().auth().currentUser,t.prev=3,t.next=6,l.update("events/".concat(e.id),Object(N.a)({},"attendees.".concat(i.uid),l.FieldValue.delete()));case 6:return t.next=8,l.delete("event_attendee/".concat(e.id,"_").concat(i.uid));case 8:I.toastr.success("Success","Cancel event successfully"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),I.toastr.error("Oops","Going to event failed"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}},"Cancel My Place"),!n&&c&&r.a.createElement(S.a,{color:"teal",onClick:function(){o(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n){var r,c,o,l,i,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=K.firestore(),c=K.auth().currentUser,o=n().firebase.profile.photoURL||"/re-vents/assets/user.png",l={going:!0,joinDate:Date.now(),photoURL:o,displayName:c.displayName,host:!1},t.prev=4,i=r.collection("events").doc(e.id),s=r.collection("event_attendee").doc("".concat(e.id,"_").concat(c.uid)),t.next=9,r.runTransaction(function(){var t=Object(f.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.get(i);case 2:a.update(i,Object(N.a)({},"attendees.".concat(c.uid),l)),a.set(s,{eventId:e.id,userUid:c.uid,eventDate:e.date,host:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:I.toastr.success("Success","Join event successfully"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),I.toastr.error("Oops","Going to event failed"),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))}},"JOIN THIS EVENT"),!c&&r.a.createElement(S.a,{color:"teal",onClick:function(){o(Y({modalType:"UnAuthModal"}))}},"JOIN THIS EVENT")),a&&r.a.createElement(S.a,{color:"orange",as:l.b,to:"/manage/".concat(t.id)},"Manage Event")))},ge=a(412),ye=function(e){e.text;return r.a.createElement(x.a,{color:"red",name:"marker",size:"large"})},Oe=function(e){return r.a.createElement(O.a,{attached:"bottom"},r.a.createElement("div",{style:{height:"300px",width:"100%"}},r.a.createElement(ge.a,{bootstrapURLKeys:{key:"AIzaSyD2BbBIyWlyqYYUyQQdSQjOkgteCT1u0cY"},defaultCenter:e.center,defaultZoom:e.zoom},r.a.createElement(ye,{lat:e.center.lat,lng:e.center.lng,text:"My Marker"}))))};var je=function(e){var t=e.event,a=Object(n.useState)(!1),c=Object(h.a)(a,2),o=c[0],l=c[1];return r.a.createElement(O.a.Group,null,r.a.createElement(O.a,{attached:"top"},r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:1},r.a.createElement(x.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(E.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(O.a,{attached:!0},r.a.createElement(E.a,{verticalAlign:"middle"},r.a.createElement(E.a.Column,{width:1},r.a.createElement(x.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(E.a.Column,{width:15},r.a.createElement("span",null,U()(t.date.toDate()).format("DD/MM/yyyy HH:mm"))))),r.a.createElement(O.a,{attached:!0},r.a.createElement(E.a,{verticalAlign:"middle"},r.a.createElement(E.a.Column,{width:1},r.a.createElement(x.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(E.a.Column,{width:11},r.a.createElement("span",null,t.venue)),r.a.createElement(E.a.Column,{width:4},r.a.createElement(S.a,{color:"teal",size:"tiny",content:o?"Hide Map":"Show Map",onClick:function(){l(!o)}})),o&&r.a.createElement(Oe,{zoom:8,center:{lat:t.venueLatLng.lat||59.95,lng:t.venueLatLng.lng||30.33}}))))};var we=function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t&&Object.keys(t).length," ",t&&1===Object.keys(t).length?"Person":"People"," ","going"),r.a.createElement(O.a,{attached:!0},r.a.createElement(j.a.Group,{divided:!0},t&&Object.keys(t).map((function(e){return r.a.createElement(j.a,{as:l.b,to:"/profile/".concat(e),key:e,style:{position:"relative"}},t[e].host&&r.a.createElement(w.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(j.a.Image,{size:"tiny",src:t[e].photoURL,alt:""}),r.a.createElement(j.a.Content,{verticalAlign:"middle"},r.a.createElement(j.a.Header,{as:"h3"},t[e].displayName)))})))))};var xe=function(e){var t=e.match,a=e.history,c=t.params.id;Object(H.useFirestoreConnect)([{collection:"events",doc:c,storeAs:"eventDetail"}]);var o=Object(i.useSelector)((function(e){return e.firestore.data.eventDetail})),l=Object(i.useSelector)((function(e){return e.firebase.auth})),s=Object(H.useFirestore)();Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("events/".concat(c));case 2:e.sent.exists||(a.push("/error"),I.toastr.error("Error","Event not found"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var u=(null===o||void 0===o?void 0:o.attendees)||[],d=(null===o||void 0===o?void 0:o.hostUid)===l.uid,m=Object.keys(u).some((function(e){return e===l.uid})),h=l.isLoaded&&!l.isEmpty;return o?r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:10},r.a.createElement(be,{event:Object(v.a)(Object(v.a)({},o),{},{id:c}),isHost:d,isGoing:m,isAuthenticated:h}),r.a.createElement(je,{event:Object(v.a)(Object(v.a)({},o),{},{id:c})}),h&&r.a.createElement(he,{eventId:c})),r.a.createElement(E.a.Column,{width:6},r.a.createElement(we,{attendees:o.attendees}))):r.a.createElement(z,null)},ke=a(800),Se=function(e){var t=e.user;return r.a.createElement(ke.a,{as:l.b,to:"/profile/".concat(null===t||void 0===t?void 0:t.id)},r.a.createElement(C.a,{src:null===t||void 0===t?void 0:t.photoURL}),r.a.createElement(ke.a.Content,{textAlign:"center"},r.a.createElement(ke.a.Header,{content:null===t||void 0===t?void 0:t.displayName})),r.a.createElement(ke.a.Meta,{textAlign:"center"},r.a.createElement("span",null,null===t||void 0===t?void 0:t.city)))},Ce=function(){var e=Object(i.useSelector)((function(e){return e.firebase.auth}));Object(H.useFirestoreConnect)([{collection:"users",doc:e.uid,subcollections:[{collection:"followings"}],storeAs:"followings"},{collection:"users",doc:e.uid,subcollections:[{collection:"followers"}],storeAs:"followers"}]);var t=Object(i.useSelector)((function(e){return e.firestore.ordered})),a=t.followings,n=t.followers;return r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:16},r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,content:"People I'm following"}),r.a.createElement(ke.a.Group,{itemsPerRow:8,stackable:!0},a&&a.map((function(e){return r.a.createElement(Se,{key:e.id,user:e})})))),r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,content:"People following me"}),r.a.createElement(ke.a.Group,{itemsPerRow:8,stackable:!0},n&&n.map((function(e){return r.a.createElement(Se,{key:e.id,user:e})}))))))},De=a(392),Re=a.n(De),Ue=a(807),Le=[{menuItem:"All events",pane:{key:"allEvents"}},{menuItem:"Past events",pane:{key:"pastEvents"}},{menuItem:"Future events",pane:{key:"futureEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}];var Ae=function(e){var t=e.uid,a=Object(i.useDispatch)();Object(n.useEffect)((function(){a(re(t))}),[]);var c=Object(i.useSelector)((function(e){return e.events})),o=Object(i.useSelector)((function(e){return e.async.loading}));return r.a.createElement(E.a.Column,{width:12},r.a.createElement(O.a,{attached:!0,loading:o},r.a.createElement(G.a,{icon:"calendar",content:"Events"}),r.a.createElement(Ue.a,{panes:Le,menu:{secondary:!0,pointing:!0},onTabChange:function(e,n){!function(e,n){a(re(t,n.activeIndex))}(0,n)}}),r.a.createElement("br",null),r.a.createElement(ke.a.Group,{itemsPerRow:5},c.map((function(e){return r.a.createElement(ke.a,{as:l.b,to:"/events/".concat(e.id),key:e.id},r.a.createElement(C.a,{src:e.photoURL||"/re-vents"+"/assets/".concat(e.category,".jpeg")}),r.a.createElement(ke.a.Content,null,r.a.createElement(ke.a.Header,{textAlign:"center"},e.title),r.a.createElement(ke.a.Meta,{textAlign:"center"},r.a.createElement("div",null,U()(e.date.toDate()).format("dddd DD-MM-yyyy").toString()),r.a.createElement("div",null,U()(e.date.toDate()).format("HH:mm A").toString()))))})))))};var Fe=function(e){var t=e.match,a=e.history,c=t.params.id,o=Object(i.useSelector)((function(e){return e.firebase})).auth;Object(H.useFirestoreConnect)((function(){return c&&c!==o.uid?[{collection:"users",doc:c,storeAs:"profiles"},{collection:"users",doc:c,subcollections:[{collection:"photos"}],storeAs:"photos"},{collection:"users",doc:o.uid,subcollections:[{collection:"followings",doc:c}],storeAs:"followings"}]:[{collection:"users",doc:o.uid,storeAs:"profiles"},{collection:"users",doc:o.uid,subcollections:[{collection:"photos"}],storeAs:"photos"},{collection:"users",doc:o.uid,subcollections:[{collection:"followings",doc:c}],storeAs:"followings"}]})),Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("users/".concat(c));case 2:e.sent.exists||(a.push("/error"),I.toastr.error("Error","User not found"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]);var s=Object(i.useSelector)((function(e){return e.firestore.ordered.photos})),u=Object(i.useSelector)((function(e){return e.firestore.ordered.profiles&&e.firestore.ordered.profiles[0]})),d=Object(i.useSelector)((function(e){return e.firestore.ordered.followings})),m=!Object(pe.isEmpty)(d),v=Object(H.useFirestore)(),h=Object(i.useSelector)((function(e){return e.firebase.profile})),b=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={photoURL:t.photoURL||"/re-vents/assets/user.png",city:t.city||"Unknown city",displayName:t.displayName},n={displayName:h.displayName,photoURL:h.photoURL||"/re-vents/assets/user.png",city:h.city||"Unknown city"},e.prev=2,e.next=5,v.set({collection:"users",doc:o.uid,subcollections:[{collection:"followings",doc:t.id}]},a);case 5:return e.next=7,v.collection("users").doc(t.id).collection("followers").doc(o.uid).set(n);case 7:I.toastr.success("Success","You have followed this person"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),I.toastr.error("Oops","Something wrong happened");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.delete({collection:"users",doc:o.uid,subcollections:[{collection:"followings",doc:t.id}]});case 3:return e.next=5,v.collection("users").doc(t.id).collection("followers").doc(o.uid).delete();case 5:I.toastr.success("Success","You have un-followed this person"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),I.toastr.error("Oops","Something wrong happened");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return u?r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:16},r.a.createElement(O.a,null,r.a.createElement(j.a.Group,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Image,{avatar:!0,size:"small",src:u.photoURL||"/re-vents/assets/user.png"}),r.a.createElement(j.a.Content,{verticalAlign:"bottom"},r.a.createElement(G.a,{as:"h1"},u.displayName),r.a.createElement("br",null),r.a.createElement(G.a,{as:"h3"},u.occupation),r.a.createElement("br",null),r.a.createElement(G.a,{as:"h3"},u.dateOfBirth?U()().diff(U()(u.dateOfBirth.toDate()),"years"):"Unknown"," ","year old , Lives in ",u.city||"Unknown")))))),r.a.createElement(E.a.Column,{width:12},r.a.createElement(O.a,null,r.a.createElement(E.a,{columns:2},r.a.createElement(E.a.Column,{width:10},r.a.createElement(G.a,{icon:"smile",content:"About Display Name"}),r.a.createElement("p",null,"I am a: ",r.a.createElement("strong",null,u.occupation||"Unknown")),r.a.createElement("p",null,"Originally from ",r.a.createElement("strong",null,u.origin||"Unknown")),r.a.createElement("p",null,"Member Since:"," ",r.a.createElement("strong",null,new Date(u.createdAt.toDate()).toDateString())),r.a.createElement("p",null,u.description)),r.a.createElement(E.a.Column,{width:6},r.a.createElement(G.a,{icon:"heart outline",content:"Interests"}),u.interest?r.a.createElement(k.a,null,u.interests&&u.interests.map((function(e,t){return r.a.createElement(j.a,{key:e+t},r.a.createElement(x.a,{name:"heart"}),r.a.createElement(j.a.Content,null,e))}))):r.a.createElement("p",null,"No interests"))))),c===o.uid?r.a.createElement(E.a.Column,{width:4},r.a.createElement(O.a,null,r.a.createElement(S.a,{as:l.b,to:"/settings",color:"teal",fluid:!0,basic:!0,content:"Edit Profile"}))):m?r.a.createElement(E.a.Column,{width:4},r.a.createElement(O.a,null,r.a.createElement(S.a,{color:"teal",fluid:!0,basic:!0,content:"UnFollow User",onClick:function(){return g(u)}}))):r.a.createElement(E.a.Column,{width:4},r.a.createElement(O.a,null,r.a.createElement(S.a,{color:"teal",fluid:!0,basic:!0,content:"Follow User",onClick:function(){return b(u)}}))),s&&s.length>0&&r.a.createElement(E.a.Column,{width:12},r.a.createElement(O.a,{attached:!0},r.a.createElement(G.a,{icon:"image",content:"Photos"}),r.a.createElement(C.a.Group,{size:"small"},s.map((function(e){return r.a.createElement(Re.a,{style:{width:"auto"},key:e.id,height:400,placeholder:r.a.createElement(C.a,{rounded:!0,src:"/re-vents/assets/user.png",alt:""})},r.a.createElement(C.a,{src:e.url,alt:""}))}))))),r.a.createElement(Ae,{uid:c})):r.a.createElement(z,null)};var Ie=function(){return r.a.createElement(E.a.Column,{width:4},r.a.createElement(q.a,{vertical:!0},r.a.createElement(G.a,{icon:"user",attached:!0,inverted:!0,color:"grey",content:"Profile"}),r.a.createElement(q.a.Item,{as:l.c,to:"/settings/basic"},"Basics"),r.a.createElement(q.a.Item,{as:l.c,to:"/settings/about"},"About Me"),r.a.createElement(q.a.Item,{as:l.c,to:"/settings/photo"},"My Photos")),r.a.createElement(E.a.Row,null),r.a.createElement(q.a,{vertical:!0},r.a.createElement(G.a,{icon:"settings",attached:!0,inverted:!0,color:"grey",content:"Account"}),r.a.createElement(q.a.Item,{as:l.c,to:"/settings/account"},"My Account")))},Pe=a(801),Ne=a(791),Me=a(393),Te=a.n(Me),Be=(a(617),a(41));var Ve=function(e){var t=e.placeholder,a=e.error,n=(e.width,e.setValue),c=e.triggerValidation,o=e.name,l=e.value,i=Object(me.a)(e,["placeholder","error","width","setValue","triggerValidation","name","value"]);return r.a.createElement(Be.a,{error:!Object(pe.isEmpty)(a)},r.a.createElement(Te.a,Object.assign({name:o,selected:l?new Date(l):null,onChange:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(o,t),c(o);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholderText:t,dateFormat:"dd/MM/yyyy HH:mm",timeFormat:"HH:mm",dropdownMode:"select"},i)),!Object(pe.isEmpty)(a)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},a))},ze=a(397),Ge=a.n(ze),He=a(799),_e=a(124),qe=a(73),Ye=a(127),Qe=a(413),We=a(396),Je=a.n(We),Ke=a(790),Ze=Object(Ke.a)({displayName:"AlgoliaPlaces",getProvidedProps:function(){return{}},refine:function(e,t,a){return Object(v.a)(Object(v.a)({},t),{},{aroundLatLng:a,boundingBox:{}})},getSearchParameters:function(e,t,a){var n=a.aroundLatLng||t.defaultRefinement;return e.setQueryParameter("insideBoundingBox").setQueryParameter("aroundLatLng","".concat(n.lat,", ").concat(n.lng))}})(function(e){Object(Ye.a)(a,e);var t=Object(Qe.a)(a);function a(){var e;Object(_e.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).createRef=function(t){return e.element=t},e}return Object(qe.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.refine,n=t.defaultRefinement,r=t.value,c=Je()({container:this.element,useDeviceLocation:!0});c.setVal(r),c.on("change",(function(t){e.props.handleChange&&e.props.handleChange(t),a(t.suggestion.latlng)})),c.on("clear",(function(){a(n)}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginBottom:20}},r.a.createElement("input",{ref:this.createRef,type:"search",id:"address-input",placeholder:this.props.placeholder}))}}]),a}(n.Component)),Xe=Ge()("latency","6be0576ff61c053d5f9a3225e2a90f76");var $e=function(e){var t=e.name,a=e.error,n=e.setValue,c=e.placeholder,o=e.value;return r.a.createElement(ue.a.Field,{error:!Object(pe.isEmpty)(a)},r.a.createElement(He.a,{indexName:"airports",searchClient:Xe},r.a.createElement(Ze,{key:o,value:o,defaultRefinement:{lat:37.7793,lng:-122.419},handleChange:function(e){var a=e.suggestion,r=a.value,c=a.latlng,o=c.lat,l=c.lng;n(t,r),n("lat",o),n("lng",l)},placeholder:c})),!Object(pe.isEmpty)(a)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},a))};var et=function(e){var t=e.error,a=e.value,n=e.type,c=e.name,o=e.register,l=e.label;return r.a.createElement(ue.a.Field,{error:!Object(pe.isEmpty)(t)},r.a.createElement("div",{className:"ui radio"},r.a.createElement("input",{value:a,type:n,name:c,ref:o})," ",r.a.createElement("label",null,l)),!Object(pe.isEmpty)(t)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},t))},tt=function(e){var t=e.error,a=e.width,n=e.register,c=e.placeholder,o=void 0===c?"":c,l=e.type,i=void 0===l?"text":l,s=e.name,u=e.fieldProps,d=Object(me.a)(e,["error","width","register","placeholder","type","name","fieldProps"]);return r.a.createElement(ue.a.Field,Object.assign({error:!Object(pe.isEmpty)(t),width:a},u),r.a.createElement("input",Object.assign({type:i,name:s,placeholder:o,ref:n},d)),!Object(pe.isEmpty)(t)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},t))},at=function(e){var t,a,c,o,l=Object(n.useState)(!1),s=Object(h.a)(l,2),u=s[0],d=s[1],m=Object(i.useSelector)((function(e){return e.firebase.profile})),E=Object(se.c)({mode:"all",defaultValues:Object(v.a)(Object(v.a)({},m),{},{dateOfBirth:null===m||void 0===m||null===(t=m.dateOfBirth)||void 0===t?void 0:t.toDate()})}),b=E.register,g=E.formState,y=E.errors,j=E.setValue,w=E.trigger,x=E.getValues,k=E.handleSubmit,C=E.watch,D=E.setError;Object(n.useEffect)((function(){b({name:"dateOfBirth"}),b({name:"city"}),d(!0)}),[]),Object(n.useEffect)((function(){!Object(pe.isEmpty)(m)&&u&&(j("displayName",m.displayName),j("city",(null===m||void 0===m?void 0:m.city)||""),j("dateOfBirth",(null===m||void 0===m?void 0:m.dateOfBirth)?m.dateOfBirth.toDate():""),j("gender",m.gender||""))}),[m]);var R=Object(H.useFirebase)(),L=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(v.a)({},t)).dateOfBirth&&(a.dateOfBirth=new Date(a.dateOfBirth)),e.prev=2,e.next=5,R.updateProfile(a);case 5:I.toastr.success("Success","Profile successfully updated"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),D("general",{message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,size:"large",content:"Basics"}),r.a.createElement(ue.a,{onSubmit:k(L)},r.a.createElement(tt,{name:"displayName",type:"text",placeholder:"Known As",register:b({required:{message:"Please enter your name",value:!0}}),error:null===y||void 0===y||null===(a=y.displayName)||void 0===a?void 0:a.message}),r.a.createElement(ue.a.Group,{inline:!0},r.a.createElement("label",null,"Gender:"),r.a.createElement(et,{type:"radio",name:"gender",value:"male",label:"Male",register:b}),r.a.createElement(et,{type:"radio",value:"female",name:"gender",label:"Female",register:b})),r.a.createElement(Ve,{width:8,name:"dateOfBirth",placeholder:"Date of Birth",value:C("dateOfBirth"),setValue:j,triggerValidation:w,showMonthDropdown:!0,showYearDropdown:!0,dateFormat:"yyyy-MM-dd",maxDate:U()().subtract(18,"years").toDate()}),r.a.createElement($e,{name:"city",placeholder:"Home Town",setValue:j,value:x("city")||""}),(null===y||void 0===y||null===(c=y.general)||void 0===c?void 0:c.message)&&r.a.createElement(Pe.a,{error:!0,list:[null===y||void 0===y||null===(o=y.general)||void 0===o?void 0:o.message]}),r.a.createElement(Ne.a,null),r.a.createElement(S.a,{size:"large",positive:!0,content:"Update Profile",loading:g.isSubmitting})))};var nt=function(e){var t=e.value,a=e.name,n=e.placeholder,c=e.error,o=e.triggerValidation,l=e.setValue,i=e.options,s=e.multiple,u=Object(me.a)(e,["value","name","placeholder","error","triggerValidation","setValue","options","multiple"]);return r.a.createElement(ue.a.Field,Object.assign({error:!Object(pe.isEmpty)(c)},u),r.a.createElement(ue.a.Select,{multiple:s,value:t,name:a,placeholder:n,onChange:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,r=a.value,l(n,r),e.next=4,o(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),options:i}),!Object(pe.isEmpty)(c)&&r.a.createElement(w.a,{basic:!0,color:"red",pointing:!0},c))},rt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],ct=function(){var e,t,a=Object(i.useSelector)((function(e){return e.firebase.profile})),c=Object(se.c)({defaultValues:Object(v.a)({interests:[],origin:""},a)}),o=c.register,l=c.setValue,s=c.setError,u=c.handleSubmit,d=c.watch,m=c.formState,h=c.trigger,E=c.errors;Object(n.useEffect)((function(){o({name:"interests"}),o({name:"origin"})}),[]),Object(n.useEffect)((function(){Object(pe.isEmpty)(a)||(l("status",null===a||void 0===a?void 0:a.status),l("about",null===a||void 0===a?void 0:a.about),l("interests",(null===a||void 0===a?void 0:a.interests)||[]),l("occupation",null===a||void 0===a?void 0:a.occupation),l("origin",null===a||void 0===a?void 0:a.origin))}),[a]);var b=Object(H.useFirebase)(),g=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(v.a)({},t),e.prev=1,e.next=4,b.updateProfile(a);case 4:I.toastr.success("Success","Profile successfully updated"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s("general",{message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,size:"large",content:"About Me"}),r.a.createElement("p",null,"Complete your profile to get the most out of this site"),r.a.createElement(ue.a,{onSubmit:u(g)},r.a.createElement(ue.a.Group,{inline:!0},r.a.createElement("label",null,"Tell us your status: "),r.a.createElement(et,{name:"status",type:"radio",value:"single",label:"Single",register:o}),r.a.createElement(et,{name:"status",type:"radio",value:"relationship",label:"Relationship",register:o}),r.a.createElement(et,{name:"status",type:"radio",value:"married",label:"Married",register:o})),r.a.createElement(Ne.a,null),r.a.createElement("label",null,"Tell us about yourself"),r.a.createElement(ve,{style:{marginTop:"1rem"},rows:5,name:"about",placeholder:"About Me",register:o}),r.a.createElement(nt,{style:{marginTop:"1rem"},name:"interests",options:rt,multiple:!0,placeholder:"Select your interests",setValue:l,triggerValidation:h,value:d("interests")}),r.a.createElement(tt,{name:"occupation",type:"text",placeholder:"Occupation",register:o}),r.a.createElement($e,{value:d("origin"),name:"origin",placeholder:"Country of Origin",setValue:l}),r.a.createElement(Ne.a,null),(null===E||void 0===E||null===(e=E.general)||void 0===e?void 0:e.message)&&r.a.createElement(Pe.a,{error:!0,list:[null===E||void 0===E||null===(t=E.general)||void 0===t?void 0:t.message]}),r.a.createElement(S.a,{size:"large",positive:!0,content:"Update Profile",type:"submit",loading:m.isSubmitting})))},ot=a(408),lt=a(399);var it=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(h.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),m=Object(h.a)(d,2),v=m[0],b=m[1],g=Object(n.useRef)(null),y=Object(i.useSelector)((function(e){return e.firebase})),j=y.auth,w=y.profile,k=Object(H.useFirebase)(),D=Object(H.useFirestore)();Object(H.useFirestoreConnect)([{collection:"users",doc:j.uid,subcollections:[{collection:"photos"}],storeAs:"photos"}]);var R=Object(i.useSelector)((function(e){return e.firestore.ordered.photos})),U=Object(ot.a)({onDrop:function(e){c(e)},multiple:!1,accept:"image/*"}),L=U.getRootProps,A=U.getInputProps,F=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),t=k.auth().currentUser,n="".concat(t.uid,"/user_images"),r={name:a[0].name},g.current.getCroppedCanvas().toBlob(function(){var e=Object(f.a)(p.a.mark((function e(o){var l,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.uploadFile(n,o,null,r);case 3:return l=e.sent,e.next=6,l.uploadTaskSnapshot.ref.getDownloadURL();case 6:return i=e.sent,e.next=9,D.get("users/".concat(t.uid));case 9:if(e.sent.data().photoURL){e.next=15;break}return e.next=13,k.updateProfile({photoURL:i});case 13:return e.next=15,t.updateProfile({photoURL:i});case 15:return e.next=17,D.add({collection:"users",doc:t.uid,subcollections:[{collection:"photos"}]},{name:a[0].name,url:i});case 17:u(!1),c([]),I.toastr.success("Success","Photo has been uploaded"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0),u(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.auth().currentUser,e.prev=1,e.next=4,k.deleteFile("".concat(a.uid,"/user_images/").concat(t.name));case 4:return e.next=6,D.delete({collection:"users",doc:a.uid,subcollections:[{collection:"photos",doc:t.id}]});case 6:I.toastr.success("Success","Photo deleted"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),I.toastr.error("Failed","Something failed"),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,o,l,i,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),a=k.firestore(),n=k.auth().currentUser,r=a.collection("users").doc(n.uid),c=a.collection("event_attendee"),e.prev=5,(o=a.batch()).update(r,{photoURL:t.url}),l=c.where("userUid","==",n.uid).where("eventDate",">",new Date),e.next=11,l.get();case 11:i=e.sent,s=0;case 13:if(!(s<i.docs.length)){e.next=22;break}return u=a.collection("events").doc(i.docs[s].data().eventId),e.next=17,u.get();case 17:e.sent.data().hostUid===n.uid?o.update(u,Object(N.a)({hostPhotoURL:t.url},"attendees.".concat(n.uid,".photoURL"),t.url)):o.update(u,Object(N.a)({},"attendees.".concat(n.uid,".photoURL"),t.url));case 19:++s,e.next=13;break;case 22:return e.next=24,o.commit();case 24:b(!1),I.toastr.success("Success","Main photo updated"),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(5),b(!1),I.toastr.error("Failed","Something failed"),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[5,28]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,size:"large",content:"Your Photos"}),r.a.createElement(E.a,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.Column,{width:4},r.a.createElement(G.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement("div",Object.assign({},L(),{className:"dropzone-wrapper"}),r.a.createElement("input",A()),r.a.createElement(x.a,{name:"upload",size:"big"}),r.a.createElement("span",null,"Drop image here or click to add"))),r.a.createElement(E.a.Column,{width:1}),r.a.createElement(E.a.Column,{width:4},r.a.createElement(G.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),a[0]&&r.a.createElement(lt.a,{src:a[0]&&URL.createObjectURL(a[0]),style:{height:200,width:"100%"},initialAspectRatio:1,preview:".img-preview",viewMode:1,guides:!0,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,onInitialized:function(e){return g.current=e}})),r.a.createElement(E.a.Column,{width:1}),r.a.createElement(E.a.Column,{width:4},r.a.createElement(G.a,{sub:!0,color:"teal",content:"Step 3 - Preview and Upload"}),a[0]&&r.a.createElement("div",{style:{width:"200px",height:"200px "}},r.a.createElement("div",{className:"img-preview",style:{width:"200px",height:"200px ",overflow:"hidden"}})),a[0]&&r.a.createElement(S.a.Group,{style:{width:"100%"}},r.a.createElement(S.a,{style:{width:"50%"},onClick:F,positive:!0,icon:"check",disabled:s,loading:s}),r.a.createElement(S.a,{style:{width:"50%"},icon:"close",disabled:s,onClick:function(){c([])}}))))),r.a.createElement(Ne.a,null),r.a.createElement(G.a,{sub:!0,color:"teal",content:"All Photos"}),r.a.createElement(ke.a.Group,{itemsPerRow:4},r.a.createElement(ke.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(C.a,{src:w.photoURL,alt:"",style:{minHeight:150,flex:1}}),r.a.createElement(S.a,{positive:!0},"Main Photo")),R&&R.map((function(e){return r.a.createElement(ke.a,{key:e.id,style:{display:"flex",flexDirection:"column"}},r.a.createElement(C.a,{src:e.url,alt:"No image",style:{minHeight:150,flex:1}}),r.a.createElement("div",{className:"ui two buttons"},r.a.createElement(S.a,{basic:!0,color:"green",loading:v,onClick:function(){M(e)}},"Main"),r.a.createElement(S.a,{basic:!0,icon:"trash",color:"red",disabled:v,onClick:function(){P(e)}})))}))))},st=a(404),ut=a(159),dt=ut.a().shape({password:ut.c().min(6).required("Please enter password"),confirmPassword:ut.c().oneOf([ut.b("password"),null],"Passwords must match")}),mt=function(){var e,t,a,n,c,o=Object(se.c)({resolver:Object(st.a)(dt),mode:"all",reValidateMode:"onChange"}),l=o.register,s=o.errors,u=o.handleSubmit,d=o.formState,m=o.reset,v=o.setError,h=Object(i.useSelector)((function(e){return e.firebase.auth.providerData[0].providerId})),E=Object(H.useFirebase)(),b=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.auth().currentUser.updatePassword(t.password);case 3:m(),I.toastr.success("Success","Your password has beed updated!"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v("general",{message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(G.a,{dividing:!0,size:"large",content:"Account"}),"password"===h&&r.a.createElement("div",null,r.a.createElement(G.a,{color:"teal",sub:!0,content:"Change password"}),r.a.createElement("p",null,"Use this form to update your account settings"),r.a.createElement(ue.a,{onSubmit:u(b)},r.a.createElement(tt,{name:"password",type:"password",pointing:"left",placeholder:"New Password",register:l({required:{message:"Required",value:!0}}),error:null===s||void 0===s||null===(e=s.password)||void 0===e?void 0:e.message,autoComplete:"new-password"}),r.a.createElement(tt,{name:"confirmPassword",type:"password",pointing:"left",placeholder:"Confirm Password",register:l({required:{message:"Required",value:!0}}),error:null===s||void 0===s||null===(t=s.confirmPassword)||void 0===t?void 0:t.message,autoComplete:"new-password"}),null!==(a=null===s||void 0===s||null===(n=s.general)||void 0===n?void 0:n.message)&&void 0!==a?a:r.a.createElement(Pe.a,{style:{color:"red"},error:!0,header:"Update password failed",list:[null===s||void 0===s||null===(c=s.general)||void 0===c?void 0:c.message]}),r.a.createElement(Ne.a,null),r.a.createElement(S.a,{disabled:!d.isValid||d.isSubmitting,size:"large",positive:!0,content:"Update Password",type:"submit",loading:d.isSubmitting}))),r.a.createElement(O.a,null,"facebook.com"===h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{color:"teal",sub:!0,content:"Facebook Account"}),r.a.createElement("p",null,"Please visit Facebook to update your account settings"),r.a.createElement(S.a,{type:"button",color:"facebook"},r.a.createElement(x.a,{name:"facebook"}),"Go to Facebook")),"google.com"===h&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{color:"teal",sub:!0,content:"Google Account"}),r.a.createElement("p",null,"Please visit Google to update your account settings"),r.a.createElement(S.a,{type:"button",color:"google plus"},r.a.createElement(x.a,{name:"google plus"}),"Go to Google"))))};var pt=function(){return r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:12},r.a.createElement(u.d,null,r.a.createElement(u.a,{exact:!0,from:"/settings",to:"/settings/basic"}),r.a.createElement(u.b,{path:"/settings/basic",component:at}),r.a.createElement(u.b,{path:"/settings/about",component:ct}),r.a.createElement(u.b,{path:"/settings/photo",component:it}),r.a.createElement(u.b,{path:"/settings/account",component:mt}))),r.a.createElement(E.a.Column,{width:4},r.a.createElement(Ie,null)))},vt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}];var ft=function(e){var t,a,c,o,l,s=e.match,u=e.history,d=s.params.id,m=Object(n.useState)(!1),b=Object(h.a)(m,2),g=b[0],y=b[1],j=Object(n.useState)({}),w=Object(h.a)(j,2),x=w[0],k=w[1],C=Object(i.useDispatch)(),D=Object(H.useFirestore)(),R=Object(se.c)({defaultValues:Object(v.a)({},x)}),U=R.register,L=R.handleSubmit,A=R.errors,F=R.setValue,P=R.trigger,N=R.watch;return Object(n.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.get("events/".concat(d));case 2:(t=e.sent).exists&&k(t.data());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}U({name:"category"},{required:{message:"Please choose a category",value:!0}}),U({name:"date"},{required:{message:"Please choose a valid date",value:!0}}),U({name:"venue"},{required:{message:"Please chose a valid venue",value:"true"}}),U({name:"lat"},{required:!0}),U({name:"lng"},{required:!0}),function(){e.apply(this,arguments)}(),y(!0)}),[]),Object(n.useEffect)((function(){!Object(pe.isEmpty)(x)&&g&&(F("lat",x.venueLatLng.lat),F("lng",x.venueLatLng.lng),F("title",x.title),F("category",x.category),F("description",x.description),F("venue",x.venue),F("date",x.date.toDate()),F("id",d))}),[x]),Object(pe.isEmpty)(x)&&!g?r.a.createElement(z,null):r.a.createElement(E.a,null,r.a.createElement(E.a.Column,{width:10},r.a.createElement(O.a,null,r.a.createElement(ue.a,{onSubmit:L((function(e){Object(pe.isEmpty)(e.id)?(C(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o,l,i,s,u,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=r.getFirestore,l=o(),i=c().auth().currentUser,s=n().firebase.profile.photoURL,u=M(i,s,e),t.prev=5,t.next=8,l.add({collection:"events"},u);case 8:return d=t.sent,t.next=11,l.set("event_attendee/".concat(d.id,"_").concat(i.uid),{eventId:d.id,userUid:i.uid,eventDate:new Date(e.date),host:!0});case 11:I.toastr.success("Success","Event has beed created"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0),I.toastr.error("Oops","Something went wrong");case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e)),u.push("/events")):(C(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirestore,o=c(),t.prev=2,t.next=5,o.update("events/".concat(e.id),Object(v.a)(Object(v.a)({},e),{},{venueLatLng:{lat:e.lat,lng:e.lng}}));case 5:I.toastr.success("Success","Event has beed updated"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0),I.toastr.error("Oops","Something went wrong");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e)),u.goBack())}))},r.a.createElement(G.a,{sub:!0,color:"teal"},"Event Details"),r.a.createElement(ue.a.Field,null,r.a.createElement("input",{ref:U,name:"id",hidden:!0})),r.a.createElement(tt,{name:"title",type:"text",placeholder:"Give your event a title",register:U({required:{message:"Please enter event title",value:!0}}),error:(null===A||void 0===A||null===(t=A.title)||void 0===t?void 0:t.message)||""}),r.a.createElement(nt,{options:vt,value:N("category"),name:"category",placeholder:"What's your event about?",error:(null===A||void 0===A||null===(a=A.category)||void 0===a?void 0:a.message)||"",setValue:F,triggerValidation:P}),r.a.createElement(ve,{rows:6,name:"description",type:"description",placeholder:"Tell us about your event",register:U({required:{message:"required",value:!0}}),error:(null===A||void 0===A||null===(c=A.title)||void 0===c?void 0:c.message)||""}),r.a.createElement(G.a,{sub:!0,color:"teal",style:{marginBottom:"1rem"}},"Event Location Details"),r.a.createElement($e,{name:"venue",placeholder:"Venue event is taking place",setValue:F,error:null===A||void 0===A||null===(o=A.venue)||void 0===o?void 0:o.message,value:N("venue")||""}),r.a.createElement(Ve,{value:N("date"),name:"date",placeholder:"Date and Time of event",error:(null===A||void 0===A||null===(l=A.date)||void 0===l?void 0:l.message)||"",setValue:F,triggerValidation:P,showTimeSelect:!0,showYearDropDown:!0,showMonthDropdown:!0}),r.a.createElement(S.a,{positive:!0,type:"submit"},"Submit"),r.a.createElement(S.a,{style:{marginLeft:"1rem"},onClick:function(){u.goBack()},type:"button"},"Cancel"),d&&r.a.createElement(S.a,{onClick:function(){C(function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(n,r,c){var o,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=c.getFirestore,l=o(),a.prev=2,a.next=5,l.update("events/".concat(t),{cancelled:e});case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[2,7]])})));return function(e,t,n){return a.apply(this,arguments)}}()}(!x.cancelled,d)),k((function(e){return Object(v.a)(Object(v.a)({},e),{},{cancelled:!e.cancelled})}))},floated:"right",type:"button",color:x.cancelled?"green":"red"},x.cancelled?"Reactivate event":"Cancel event")))))};var ht=function(){return r.a.createElement(O.a,{inverted:!0,textAlign:"center",vertical:!0,className:"homepage"},r.a.createElement(s.a,{text:!0},r.a.createElement(G.a,{as:"h1",inverted:!0},r.a.createElement(C.a,{size:"massive",src:"/re-vents/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Re-vents"),r.a.createElement(S.a,{size:"huge",inverted:!0,as:l.b,to:"/events"},"Get started",r.a.createElement(x.a,{name:"right arrow",inverted:!0}))))},Et=a(798);var bt=function(){var e=Object(i.useDispatch)();return r.a.createElement("div",null,r.a.createElement(S.a,{type:"button",style:{marginBottom:"10px"},fluid:!0,color:"facebook",onClick:function(){e(ne("facebook"))}},r.a.createElement(x.a,{name:"facebook"})," Login with Facebook"),r.a.createElement(S.a,{type:"button",fluid:!0,style:{marginBottom:"10px"},color:"google plus",onClick:function(){e(ne("google"))}},r.a.createElement(x.a,{name:"google plus"}),"Login with Google"),r.a.createElement(S.a,{type:"button",fluid:!0,style:{marginBottom:"10px"},onClick:function(){e(ne("github"))}},r.a.createElement(x.a,{name:"github"}),"Login with Github"))},gt=function(){var e=Object(se.c)({mode:"all",reValidateMode:"onChange"}),t=e.register,a=e.handleSubmit,n=e.formState,c=Object(i.useSelector)((function(e){return e.auth})).logInError,o=Object(i.useDispatch)();return r.a.createElement(ue.a,{error:!0,size:"large",onSubmit:a((function(e){o(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n,r){var c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,o=c(),t.prev=2,t.next=5,o.auth().signInWithEmailAndPassword(e.email,e.password);case 5:a(Q()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),a(te(t.t0));case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}()}(e))}))},r.a.createElement(O.a,null,r.a.createElement(tt,{name:"email",type:"text",placeholder:"Email Address",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(tt,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",register:t({required:{message:"Required",value:!0}})}),c&&r.a.createElement(Pe.a,{error:!0,header:"Log in failed",list:[null===c||void 0===c?void 0:c.message]}),r.a.createElement(S.a,{fluid:!0,size:"large",color:"teal",disabled:!n.isValid||n.isSubmitting,loading:n.isSubmitting},"Login"),r.a.createElement(Ne.a,{content:"Or",horizontal:!0}),r.a.createElement(bt,null)))},yt=function(){var e=Object(se.c)({mode:"all",reValidateMode:"onChange"}),t=e.register,a=e.handleSubmit,n=e.formState,c=Object(i.useSelector)((function(e){return e.auth})).registerUserError,o=Object(i.useDispatch)();return r.a.createElement(ue.a,{error:!0,size:"large",onSubmit:a((function(e){var t;o((t=e,function(){var e=Object(f.a)(p.a.mark((function e(a,n,r){var c,o,l,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.getFirebase,o=c(),l=o.firestore(),e.prev=3,e.next=6,o.auth().createUserWithEmailAndPassword(t.email,t.password);case 6:return e.next=8,o.auth().currentUser.updateProfile({displayName:t.displayName});case 8:return i={displayName:t.displayName,createdAt:o.firestore.FieldValue.serverTimestamp()},e.next=11,l.collection("users").doc("/".concat(o.auth().currentUser.uid)).set(Object(v.a)({},i));case 11:a(Q()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),a(ee(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,a,n){return e.apply(this,arguments)}}()))}))},r.a.createElement(O.a,null,r.a.createElement(tt,{name:"displayName",type:"text",placeholder:"Know As",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(tt,{name:"email",type:"email",placeholder:"Email",register:t({required:{message:"Required",value:!0}})}),r.a.createElement(tt,{name:"password",type:"password",placeholder:"Password",register:t({required:{message:"Required",value:!0},minLength:{message:"At lease 6 characters",value:6}})}),c&&r.a.createElement(Pe.a,{error:!0,header:"Register failed",list:[c.message]}),r.a.createElement(S.a,{fluid:!0,size:"large",color:"teal",disabled:!n.isValid||n.isSubmitting,loading:n.isSubmitting},"Register"),r.a.createElement(Ne.a,{content:"Or",horizontal:!0}),r.a.createElement(bt,null)))};var Ot={LogInModal:function(){var e=Object(i.useDispatch)();return r.a.createElement(Et.a,{size:"mini",open:!0,onClose:function(){e(Q())}},r.a.createElement(Et.a.Header,null,"Login to Re-vents"),r.a.createElement(Et.a.Content,null,r.a.createElement(Et.a.Description,null,r.a.createElement(gt,null))))},RegisterModal:function(){var e=Object(i.useDispatch)();return r.a.createElement(Et.a,{size:"mini",open:!0,onClose:function(){e(Q())}},r.a.createElement(Et.a.Header,null,"Sign Up to Re-vents"),r.a.createElement(Et.a.Content,null,r.a.createElement(Et.a.Description,null,r.a.createElement(yt,null))))},UnAuthModal:Object(u.i)((function(e){var t=e.history,a=Object(i.useDispatch)(),n=function(){t.goBack(),a(Q())},c=function(e){a(Y({modalType:e}))};return r.a.createElement(Et.a,{size:"mini",open:!0,onClose:n},r.a.createElement(Et.a.Header,null,"You need to be signed in to do that!"),r.a.createElement(Et.a.Content,null,r.a.createElement(Et.a.Description,null,r.a.createElement("p",null,"Please either login or register to see this page"),r.a.createElement(S.a.Group,{widths:4},r.a.createElement(S.a,{fluid:!0,color:"teal",onClick:function(){return c("LogInModal")}},"Login"),r.a.createElement(S.a.Or,null),r.a.createElement(S.a,{fluid:!0,positive:!0,onClick:function(){return c("RegisterModal")}},"Register")),r.a.createElement(Ne.a,null),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,"Or click cancel to continue as a guest"),r.a.createElement(S.a,{onClick:n},"Cancel")))))}))};var jt=function(){var e=Object(i.useSelector)((function(e){return e.modals})),t=null;if(e){var a=e.modalType,n=e.modalProps,c=Ot[a];t=r.a.createElement(c,n)}return t};var wt=function(e){var t=e.children,a=Object(i.useSelector)((function(e){return e.firebase.auth}));return Object(H.isLoaded)(a)?t:r.a.createElement(V.a,{active:!0,inverted:!0},r.a.createElement(b.a,{inverted:!0,content:"Loading..."}))},xt=a(405),kt=Object(xt.connectedReduxRedirect)({wrapperDisplayName:"UserIsAuthenticated",authenticatedSelector:function(e){var t=e.firebase.auth;return t.isLoaded&&!t.isEmpty},redirectPath:"/events",redirectAction:function(){return function(e){e(Y({modalType:"UnAuthModal"}))}}});var St=function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{color:"red"}},"Error 404 Not Found"))};var Ct,Dt,Rt,Ut,Lt=function(){return r.a.createElement(wt,null,r.a.createElement("div",null,r.a.createElement(jt,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:ht})),r.a.createElement(u.b,{path:"/(.+)",render:function(){return r.a.createElement("div",null,r.a.createElement(ie,null),r.a.createElement(s.a,{style:{marginTop:"5rem"}},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/events",exact:!0,component:_}),r.a.createElement(u.b,{path:"/events/:id",component:xe}),r.a.createElement(u.b,{path:"/manage/:id",component:kt(ft)}),r.a.createElement(u.b,{path:"/people",component:kt(Ce)}),r.a.createElement(u.b,{path:"/profile/:id",component:kt(Fe)}),r.a.createElement(u.b,{path:"/settings",component:kt(pt)}),r.a.createElement(u.b,{path:"/create-event",component:kt(ft)}),r.a.createElement(u.b,{path:"/error",component:St}))))}})))},At=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,808)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},Ft=a(100),It=a(406),Pt=a(407),Nt=a(792),Mt=[],Tt=Object(Nt.a)((Ct={},Object(N.a)(Ct,B,(function(e,t){var a=t.payload;return Object(d.a)(a)})),Object(N.a)(Ct,T,(function(e){return Mt})),Ct),Mt),Bt=Object(Nt.a)((Dt={},Object(N.a)(Dt,Y,(function(e,t){return t.payload})),Object(N.a)(Dt,Q,(function(){return null})),Dt),null),Vt={logInError:null,registerUserError:null},zt=Object(Nt.a)((Rt={},Object(N.a)(Rt,te,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{logInError:a})})),Object(N.a)(Rt,ee,(function(e,t){var a=t.payload;return Object(v.a)(Object(v.a)({},e),{},{registerUserError:a})})),Object(N.a)(Rt,ae,(function(e){return Vt})),Rt),Vt),Gt=Object(Nt.a)((Ut={},Object(N.a)(Ut,Z,(function(e){return Object(v.a)(Object(v.a)({},e),{},{loading:!0})})),Object(N.a)(Ut,X,(function(e){return Object(v.a)(Object(v.a)({},e),{},{loading:!1})})),Object(N.a)(Ut,$,(function(e){return Object(v.a)(Object(v.a)({},e),{},{loading:!1})})),Ut),{loading:!1}),Ht=a(132),_t=Object(Ft.combineReducers)({events:Tt,modals:Bt,auth:zt,async:Gt,toastr:I.reducer,firebase:H.firebaseReducer,firestore:Ht.firestoreReducer}),qt=[It.a.withExtraArgument({getFirebase:H.getFirebase,getFirestore:Ht.getFirestore})],Yt=[Ft.applyMiddleware.apply(void 0,qt)],Qt=Pt.composeWithDevTools.apply(void 0,Yt.concat([Object(Ht.reduxFirestore)(K)])),Wt=Object(Ft.createStore)(_t,Qt);function Jt(e){var t=e.children,a=Object(u.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[a]),t}a(772),a(773),a(774);var Kt={firebase:K,config:{userProfile:"users",attachAuthIsReady:!0,firebaseStateName:"firebase",useFirestoreForProfile:!0,profileFactory:function(e,t,a){return{displayName:e.displayName,email:t.email,photoURL:t.avatarUrl,createdAt:a.firestore.FieldValue.serverTimestamp()}}},dispatch:Wt.dispatch,createFirestoreInstance:Ht.createFirestoreInstance};o.a.render(r.a.createElement(i.Provider,{store:Wt},r.a.createElement(H.ReactReduxFirebaseProvider,Kt,r.a.createElement(l.a,null,r.a.createElement(Jt,null,r.a.createElement(P.a,{timeOut:4e3,position:"top-right",transitionIn:"fadeIn",transitionOut:"fadeOut"}),r.a.createElement(Lt,null))))),document.getElementById("root")),At()}},[[775,1,2]]]);
//# sourceMappingURL=main.6b3c204e.chunk.js.map